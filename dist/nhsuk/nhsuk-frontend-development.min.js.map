{"version":3,"file":"nhsuk-frontend-development.min.js","sources":["../../src/nhsuk/common/closest-attribute-value.mjs","../../src/nhsuk/common/nhsuk-frontend-version.mjs","../../src/nhsuk/common/index.mjs","../../src/nhsuk/common/configuration/normalise-string.mjs","../../src/nhsuk/common/configuration/extract-config-by-namespace.mjs","../../src/nhsuk/common/configuration/merge-configs.mjs","../../src/nhsuk/errors/index.mjs","../../src/nhsuk/common/configuration/normalise-dataset.mjs","../../src/nhsuk/common/configuration/normalise-options.mjs","../../src/nhsuk/common/configuration/validate-config.mjs","../../src/nhsuk/component.mjs","../../src/nhsuk/configurable-component.mjs","../../src/nhsuk/components/button/button.mjs","../../src/nhsuk/i18n.mjs","../../src/nhsuk/components/character-count/character-count.mjs","../../src/nhsuk/components/checkboxes/checkboxes.mjs","../../src/nhsuk/components/error-summary/error-summary.mjs","../../src/nhsuk/components/file-upload/file-upload.mjs","../../src/nhsuk/components/header/header.mjs","../../src/nhsuk/components/notification-banner/notification-banner.mjs","../../src/nhsuk/components/password-input/password-input.mjs","../../src/nhsuk/components/radios/radios.mjs","../../src/nhsuk/components/skip-link/skip-link.mjs","../../src/nhsuk/components/tables/table.mjs","../../src/nhsuk/components/tabs/tabs.mjs","../../src/nhsuk/index.mjs"],"sourcesContent":["/**\n * Returns the value of the given attribute closest to the given element (including itself)\n *\n * @param {Element} $element - The element to start walking the DOM tree up\n * @param {string} attributeName - The name of the attribute\n * @returns {string | null} Attribute value\n */\nexport function closestAttributeValue($element, attributeName) {\n  const $closestElementWithAttribute = $element.closest(`[${attributeName}]`)\n  return $closestElementWithAttribute\n    ? $closestElementWithAttribute.getAttribute(attributeName)\n    : null\n}\n","/*\n * This variable is automatically overwritten during builds and releases.\n * It doesn't need to be updated manually.\n */\n\n/**\n * NHS.UK frontend release version\n *\n * {@link https://github.com/nhsuk/nhsuk-frontend/releases}\n */\nexport const version = 'development'\n","/**\n * Toggle a toggle a class on conditional content for an input based on checked state\n *\n * @param {Element | null} $input - input element\n * @param {string} className - class to toggle\n */\nexport function toggleConditionalInput($input, className) {\n  if (!$input || !($input instanceof HTMLInputElement) || !className) {\n    return\n  }\n\n  const targetId = $input.getAttribute('aria-controls')\n  if (!targetId) {\n    return\n  }\n\n  const target = document.getElementById(targetId)\n  if (!target) {\n    return\n  }\n\n  $input.setAttribute('aria-expanded', $input.checked.toString())\n  target.classList.toggle(className, !$input.checked)\n}\n\n/**\n * Get NHS.UK frontend breakpoint value from CSS custom property\n *\n * @param {string} name - Breakpoint name\n */\nexport function getBreakpoint(name) {\n  const property = `--nhsuk-breakpoint-${name}`\n\n  // Get value from `<html>` with breakpoints on CSS :root\n  const value = window\n    .getComputedStyle(document.documentElement)\n    .getPropertyValue(property)\n\n  return {\n    property,\n    value: value || undefined\n  }\n}\n\n/**\n * Move focus to element\n *\n * Sets tabindex to -1 to make the element programmatically focusable,\n * but removes it on blur as the element doesn't need to be focused again.\n *\n * Original code taken from GDS (Government Digital Service)\n * {@link https://github.com/alphagov/govuk-frontend}\n *\n * @template {HTMLElement} FocusElement\n * @param {FocusElement} $element - HTML element\n * @param {object} [options] - Handler options\n * @param {function(this: FocusElement): void} [options.onBeforeFocus] - Callback before focus\n * @param {function(this: FocusElement): void} [options.onBlur] - Callback on blur\n */\nexport function setFocus($element, options = {}) {\n  const isFocusable = $element.getAttribute('tabindex')\n\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1')\n  }\n\n  /**\n   * Handle element focus\n   */\n  function onFocus() {\n    $element.removeEventListener('focus', onFocus)\n    $element.addEventListener('blur', onBlur)\n  }\n\n  /**\n   * Handle element blur\n   */\n  function onBlur() {\n    $element.removeEventListener('blur', onBlur)\n\n    if (options.onBlur) {\n      options.onBlur.call($element)\n    }\n\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex')\n    }\n  }\n\n  // Add listener to reset element on blur, after focus\n  $element.addEventListener('focus', onFocus)\n\n  // Focus element\n  if (options.onBeforeFocus) {\n    options.onBeforeFocus.call($element)\n  }\n\n  $element.focus()\n}\n\n/**\n * Checks if component is already initialised\n *\n * @param {Element} $root - HTML element to be checked\n * @param {string} moduleName - name of component module\n * @returns {boolean} Whether component is already initialised\n */\nexport function isInitialised($root, moduleName) {\n  return (\n    $root instanceof HTMLElement &&\n    $root.hasAttribute(`data-${moduleName}-init`)\n  )\n}\n\n/**\n * Checks if NHS.UK frontend is supported on this page\n *\n * Some browsers will load and run our JavaScript but NHS.UK frontend\n * won't be supported.\n *\n * @param {HTMLElement | null} [$scope] - (internal) `<body>` HTML element checked for browser support\n * @returns {boolean} Whether NHS.UK frontend is supported on this page\n */\nexport function isSupported($scope = document.body) {\n  if (!$scope) {\n    return false\n  }\n\n  return $scope.classList.contains('nhsuk-frontend-supported')\n}\n\n/**\n * Check for an object\n *\n * @template {Partial<Record<keyof ObjectType, unknown>>} ObjectType\n * @param {unknown | ObjectType} option - Option to check\n * @returns {option is ObjectType} Whether the option is an object\n */\nexport function isObject(option) {\n  return !!option && typeof option === 'object' && !Array.isArray(option)\n}\n\n/**\n * Check for valid scope\n *\n * @template {Element | Document} ScopeType\n * @param {unknown | ScopeType} $scope - Scope of the document to search within\n * @returns {$scope is ScopeType} Whether the scope can be queried\n */\nexport function isScope($scope) {\n  return !!$scope && ($scope instanceof Element || $scope instanceof Document)\n}\n\n/**\n * Format error message\n *\n * @param {CompatibleClass} Component - Component that threw the error\n * @param {string} message - Error message\n * @returns {string} - Formatted error message\n */\nexport function formatErrorMessage(Component, message) {\n  return `${Component.moduleName}: ${message}`\n}\n\nexport * from './closest-attribute-value.mjs'\nexport * from './nhsuk-frontend-version.mjs'\n\n/**\n * @import { CompatibleClass } from '../component.mjs'\n */\n","/**\n * Normalise string\n *\n * 'If it looks like a duck, and it quacks like a duckâ€¦' ðŸ¦†\n *\n * If the passed value looks like a boolean or a number, convert it to a boolean\n * or number.\n *\n * Designed to be used to convert config passed via data attributes (which are\n * always strings) into something sensible.\n *\n * @param {string | number | boolean | undefined} value - The value to normalise\n * @param {SchemaProperty} [property] - Component schema property\n * @returns Normalised data\n */\nexport function normaliseString(value, property) {\n  if (!isValid(value)) {\n    return\n  }\n\n  const trimmedValue = value.toString().trim()\n\n  let output\n  let outputType = property?.type\n\n  // No schema type set? Determine automatically\n  if (!outputType) {\n    if (['true', 'false'].includes(trimmedValue)) {\n      outputType = 'boolean'\n    }\n\n    // Empty / whitespace-only strings are considered finite so we need to check\n    // the length of the trimmed string as well\n    if (trimmedValue.length > 0 && isFinite(Number(trimmedValue))) {\n      outputType = 'number'\n    }\n  }\n\n  switch (outputType) {\n    case 'boolean':\n      output = trimmedValue === 'true'\n      break\n\n    case 'number':\n      output = Number(trimmedValue)\n      break\n\n    default:\n      output = value\n  }\n\n  return output\n}\n\n/**\n * Normalise array of strings\n *\n * @param {string | (string | number | boolean | undefined)[] | undefined} value - The value to normalise\n * @param {Parameters<typeof JSON.parse>[1]} [reviver] - JSON parse reviver function\n * @returns Normalised array of data\n */\nexport function normaliseArray(value, reviver = getArrayValue) {\n  let values = Array.isArray(value) ? value : []\n\n  // Attempt to parse string as array\n  if (typeof value === 'string') {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      values = JSON.parse(decodeURIComponent(value), reviver) ?? []\n    } catch {\n      return []\n    }\n  }\n\n  // Normalise and filter array values\n  return values\n    .map((value) => normaliseString(value))\n    .filter((value) => value !== undefined)\n}\n\n/**\n * Accept valid array values only\n *\n * Used as reviver function in `JSON.parse()`\n *\n * @this {unknown}\n * @param {string} key\n * @param {unknown} value\n */\nfunction getArrayValue(key, value) {\n  return isValid(value) || (key === '' && Array.isArray(value))\n    ? value\n    : undefined\n}\n\n/**\n * Whether value is valid\n *\n * @param {unknown} value\n */\nfunction isValid(value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * @import { SchemaProperty } from './index.mjs'\n */\n","import { isObject } from '../index.mjs'\n\nimport { normaliseString } from './normalise-string.mjs'\n\n/**\n * Extracts keys starting with a particular namespace from dataset ('data-*')\n * object, removing the namespace in the process, normalising all values\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @param {Schema<ConfigurationType>} schema - The schema of a component\n * @param {DOMStringMap} dataset - The object to extract key-value pairs from\n * @param {keyof ConfigurationType} namespace - The namespace to filter keys with\n * @returns {ObjectNested | undefined} Nested object with dot-separated key namespace removed\n */\nexport function extractConfigByNamespace(schema, dataset, namespace) {\n  const property = schema.properties[namespace]\n\n  // Only extract configs for object schema properties\n  if (property?.type !== 'object') {\n    return\n  }\n\n  // Add default empty config\n  const newObject = /** @type {Record<typeof namespace, ObjectNested>} */ ({\n    [namespace]: {}\n  })\n\n  for (const [key, value] of Object.entries(dataset)) {\n    /** @type {ObjectNested | ObjectNested[NestedKey]} */\n    let current = newObject\n\n    // Split the key into parts, using . as our namespace separator\n    const keyParts = key.split('.')\n\n    /**\n     * Create new level per part\n     *\n     * e.g. 'i18n.textareaDescription.other' becomes\n     * `{ i18n: { textareaDescription: { other } } }`\n     */\n    for (const [index, name] of keyParts.entries()) {\n      if (isObject(current)) {\n        // Drop down to nested object until the last part\n        if (index < keyParts.length - 1) {\n          // New nested object (optionally) replaces existing value\n          if (!isObject(current[name])) {\n            current[name] = {}\n          }\n\n          // Drop down into new or existing nested object\n          current = current[name]\n        } else if (key !== namespace) {\n          // Normalised value (optionally) replaces existing value\n          current[name] = normaliseString(value)\n        }\n      }\n    }\n  }\n\n  return newObject[namespace]\n}\n\n/**\n * Schema for component config\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @typedef {object} Schema\n * @property {Record<keyof ConfigurationType, SchemaProperty | undefined>} properties - Schema properties\n * @property {SchemaCondition<ConfigurationType>[]} [anyOf] - List of schema conditions\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object' | 'array'} type - Property type\n */\n\n/**\n * Schema condition for component config\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @typedef {object} SchemaCondition\n * @property {(keyof ConfigurationType)[]} required - List of required config fields\n * @property {string} errorMessage - Error message when required config fields not provided\n */\n\n/**\n * @typedef {keyof ObjectNested} NestedKey\n * @typedef {{ [key: string]: string | boolean | number | (string | number | boolean)[] | ObjectNested | undefined }} ObjectNested\n */\n","import { isObject } from '../index.mjs'\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns A merged config object\n */\nexport function mergeConfigs(...configObjects) {\n  // Start with an empty object as our base\n  /** @type {{ [key: string]: unknown }} */\n  const formattedConfigObject = {}\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key]\n      const override = configObject[key]\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (isObject(option) && isObject(override)) {\n        formattedConfigObject[key] = mergeConfigs(option, override)\n      } else {\n        // Apply override\n        formattedConfigObject[key] = override\n      }\n    }\n  }\n\n  return formattedConfigObject\n}\n","import { formatErrorMessage } from '../common/index.mjs'\n\n/**\n * NHS.UK frontend error\n *\n * A base class for `Error`s thrown by NHS.UK frontend.\n *\n * It is meant to be extended into specific types of errors\n * to be thrown by our code.\n *\n * @example\n * ```js\n * class MissingRootError extends NHSUKFrontendError {\n *   // Setting an explicit name is important as extending the class will not\n *   // set a new `name` on the subclass. The `name` property is important\n *   // to ensure intelligible error names even if the class name gets\n *   // mangled by a minifier\n *   name = \"MissingRootError\"\n * }\n * ```\n * @abstract\n */\nexport class NHSUKFrontendError extends Error {\n  name = 'NHSUKFrontendError'\n}\n\n/**\n * Indicates that NHS.UK frontend is not supported\n */\nexport class SupportError extends NHSUKFrontendError {\n  name = 'SupportError'\n\n  /**\n   * Checks if NHS.UK frontend is supported on this page\n   *\n   * @param {HTMLElement | null} [$scope] - HTML element `<body>` checked for browser support\n   */\n  constructor($scope = document.body) {\n    const supportMessage =\n      'noModule' in HTMLScriptElement.prototype\n        ? 'NHS.UK frontend initialised without `<body class=\"nhsuk-frontend-supported\">` from template `<script>` snippet'\n        : 'NHS.UK frontend is not supported in this browser'\n\n    super(\n      $scope\n        ? supportMessage\n        : 'NHS.UK frontend initialised without `<script type=\"module\">`'\n    )\n  }\n}\n\n/**\n * Indicates that a component has received an illegal configuration\n */\nexport class ConfigError extends NHSUKFrontendError {\n  name = 'ConfigError'\n}\n\n/**\n * Indicates an issue with an element (possibly `null` or `undefined`)\n */\nexport class ElementError extends NHSUKFrontendError {\n  name = 'ElementError'\n\n  /**\n   * @param {ElementErrorOptions} options - Element error options\n   */\n  constructor(options) {\n    const { component, identifier, element, expectedType } = options\n\n    let message = identifier\n\n    // Append reason\n    message += element\n      ? ` is not of type ${expectedType ?? 'HTMLElement'}`\n      : ' not found'\n\n    // Prepend with module name (optional)\n    if (component) {\n      message = formatErrorMessage(component, message)\n    }\n\n    super(message)\n  }\n}\n\n/**\n * Indicates that a component is already initialised\n */\nexport class InitError extends NHSUKFrontendError {\n  name = 'InitError'\n\n  /**\n   * @param {CompatibleClass | string} componentOrMessage - Component or init error message\n   */\n  constructor(componentOrMessage) {\n    const message =\n      typeof componentOrMessage === 'string'\n        ? componentOrMessage\n        : formatErrorMessage(\n            componentOrMessage,\n            'Root element (`$root`) already initialised'\n          )\n\n    super(message)\n  }\n}\n\n/**\n * Element error options\n *\n * @typedef {object} ElementErrorOptions\n * @property {Element | Document | null} [element] - The element in error (optional)\n * @property {CompatibleClass} [component] - Component throwing the error (optional)\n * @property {string} identifier - An identifier that'll let the user understand which element has an error. This is whatever makes the most sense\n * @property {string} [expectedType] - The type that was expected for the identifier\n */\n\n/**\n * @import { CompatibleClass } from '../component.mjs'\n */\n","import { ConfigError } from '../../errors/index.mjs'\nimport { formatErrorMessage, isObject } from '../index.mjs'\n\nimport { extractConfigByNamespace } from './extract-config-by-namespace.mjs'\nimport { normaliseArray, normaliseString } from './normalise-string.mjs'\n\n/**\n * Normalise dataset\n *\n * Loop over an object and normalise each value using {@link normaliseString},\n * optionally expanding `data-i18n.property` nested values\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @template {[keyof ConfigurationType, SchemaProperty | undefined][]} SchemaEntryType\n * @param {CompatibleClass & { schema?: Schema<ConfigurationType> }} Component - Component class\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {ObjectNested} Normalised dataset\n */\nexport function normaliseDataset(Component, dataset) {\n  if (!isObject(Component.schema)) {\n    throw new ConfigError(\n      formatErrorMessage(\n        Component,\n        'Config passed as parameter into constructor but no schema defined'\n      )\n    )\n  }\n\n  const out = /** @type {ObjectNested} */ ({})\n  const entries = /** @type {SchemaEntryType} */ (\n    Object.entries(Component.schema.properties)\n  )\n\n  // Normalise top-level dataset ('data-*') values using schema types\n  for (const entry of entries) {\n    const [namespace, property] = entry\n\n    // Cast the `namespace` to string so it can be used to access the dataset\n    const field = namespace.toString()\n\n    if (field in dataset) {\n      out[field] =\n        property?.type === 'array'\n          ? normaliseArray(dataset[field])\n          : normaliseString(dataset[field], property)\n    }\n\n    /**\n     * Extract and normalise nested object values automatically using\n     * {@link normaliseString} but only schema object types are allowed\n     */\n    if (property?.type === 'object') {\n      out[field] = extractConfigByNamespace(\n        Component.schema,\n        dataset,\n        namespace\n      )\n    }\n  }\n\n  return out\n}\n\n/**\n * @import { CompatibleClass } from '../../component.mjs'\n * @import { ObjectNested, Schema, SchemaProperty } from './index.mjs'\n */\n","import { isObject, isScope } from '../index.mjs'\n\n/**\n * Normalise options passed to `initAll` or `createAll`\n *\n * @template {CompatibleClass} ComponentClass\n * @param {Config | CreateAllOptions<ComponentClass> | OnErrorCallback<ComponentClass> | Element | Document | null} [scopeOrOptions] - Scope of the document to search within, initialisation options or error callback function\n * @returns {CreateAllOptions<ComponentClass>} Normalised options\n */\nexport function normaliseOptions(scopeOrOptions) {\n  let /** @type {Element | Document | null} */ $scope = document\n  let /** @type {OnErrorCallback<ComponentClass> | undefined} */ onError\n\n  // Handle options object\n  if (isObject(scopeOrOptions)) {\n    const options = scopeOrOptions\n\n    // Scope must be valid or null\n    if (isScope(options.scope) || options.scope === null) {\n      $scope = options.scope\n    }\n\n    // Error handler must be a function\n    if (typeof options.onError === 'function') {\n      onError = options.onError\n    }\n  }\n\n  if (isScope(scopeOrOptions)) {\n    $scope = scopeOrOptions\n  } else if (scopeOrOptions === null) {\n    $scope = null\n  } else if (typeof scopeOrOptions === 'function') {\n    onError = scopeOrOptions\n  }\n\n  return {\n    scope: $scope,\n    onError\n  }\n}\n\n/**\n * @import { CompatibleClass } from '../../component.mjs'\n * @import { Config, CreateAllOptions, OnErrorCallback } from '../../index.mjs'\n */\n","/**\n * Validate component config by schema\n *\n * Follows limited examples in JSON schema for wider support in future\n *\n * {@link https://ajv.js.org/json-schema.html#compound-keywords}\n * {@link https://ajv.js.org/packages/ajv-errors.html#single-message}\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @param {Schema<ConfigurationType>} schema - The schema of a component\n * @param {ConfigurationType} config - Component config\n * @returns {string[]} List of validation errors\n */\nexport function validateConfig(schema, config) {\n  const validationErrors = []\n\n  // Check errors for each schema\n  for (const [name, conditions] of Object.entries(schema)) {\n    const errors = []\n\n    // Check errors for each schema condition\n    if (Array.isArray(conditions)) {\n      for (const { required, errorMessage } of conditions) {\n        if (!required.every((key) => !!config[key])) {\n          errors.push(errorMessage) // Missing config key value\n        }\n      }\n\n      // Check one condition passes or add errors\n      if (name === 'anyOf' && !(conditions.length - errors.length >= 1)) {\n        validationErrors.push(...errors)\n      }\n    }\n  }\n\n  return validationErrors\n}\n\n/**\n * @import { Schema } from './index.mjs'\n */\n","import { isInitialised, isSupported } from './common/index.mjs'\nimport { ElementError, InitError, SupportError } from './errors/index.mjs'\n\nconst _self =\n  typeof globalThis !== 'undefined'\n    ? globalThis // Modern browsers, Node.js\n    : self // Old browsers, web workers\n\n/**\n * Base component class\n *\n * Centralises the behaviours shared by our components\n *\n * @abstract\n * @template {Element} [RootElementType=HTMLElement]\n */\nexport class Component {\n  /**\n   * @type {typeof Element}\n   */\n  static elementType = _self.HTMLElement\n\n  /**\n   * @type {RootElementType}\n   */\n  $root\n\n  /**\n   * Constructs a new component, validating that NHS.UK frontend is supported\n   *\n   * @param {Element | null} $root - HTML element to use for component\n   */\n  constructor($root) {\n    const childConstructor = /** @type {ComponentConstructor} */ (\n      this.constructor\n    )\n\n    if (!$root || !($root instanceof childConstructor.elementType)) {\n      throw new ElementError({\n        element: $root,\n        component: childConstructor,\n        identifier: 'Root element (`$root`)',\n        expectedType: childConstructor.elementType.name\n      })\n    }\n\n    this.$root = /** @type {RootElementType} */ ($root)\n\n    childConstructor.checkSupport()\n\n    this.checkInitialised()\n\n    const { moduleName } = childConstructor\n    this.$root.setAttribute(`data-${moduleName}-init`, '')\n  }\n\n  /**\n   * Validates whether component is already initialised\n   *\n   * @throws {InitError} when component is already initialised\n   */\n  checkInitialised() {\n    const childConstructor = /** @type {ComponentConstructor} */ (\n      this.constructor\n    )\n\n    if (isInitialised(this.$root, childConstructor.moduleName)) {\n      throw new InitError(childConstructor)\n    }\n  }\n\n  /**\n   * Validates whether components are supported\n   *\n   * @throws {SupportError} when the components are not supported\n   */\n  static checkSupport() {\n    if (!isSupported()) {\n      throw new SupportError()\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-component'\n}\n\n/**\n * Component compatible class\n *\n * @template {typeof Component | typeof ConfigurableComponent} [ComponentType=typeof Component]\n * @typedef {{\n *   new(...args: ConstructorParameters<ComponentType>): InstanceType<ComponentType>,\n *   defaults?: ObjectNested,\n *   schema?: Schema<ObjectNested>,\n *   moduleName: string\n * }} CompatibleClass\n */\n\n/**\n * Component constructor\n *\n * @template {typeof Component | typeof ConfigurableComponent} [ComponentType=typeof Component]\n * @typedef {CompatibleClass & ComponentType} ComponentConstructor\n */\n\n/**\n * Component initialisation options\n *\n * @typedef {object} InitOptions\n * @property {Element | Document | null} [scope] - Scope of the document to search within\n */\n\n/**\n * @import { ObjectNested, Schema } from './common/configuration/index.mjs'\n * @import { ConfigurableComponent } from './configurable-component.mjs'\n */\n","import {\n  mergeConfigs,\n  normaliseDataset\n} from './common/configuration/index.mjs'\nimport { formatErrorMessage, isObject } from './common/index.mjs'\nimport { Component } from './component.mjs'\nimport { ConfigError } from './errors/index.mjs'\n\n/**\n * Configurable base component class\n *\n * @abstract\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} [ConfigurationType=ObjectNested]\n * @template {HTMLElement} [RootElementType=HTMLElement]\n * @augments {Component<RootElementType>}\n */\nexport class ConfigurableComponent extends Component {\n  /**\n   * @type {ConfigurationType}\n   */\n  config\n\n  /**\n   * Constructs a new component, validating that NHS.UK frontend is supported\n   *\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<ConfigurationType>} [config] - HTML element to use for component\n   */\n  constructor($root, config) {\n    super($root)\n\n    const childConstructor =\n      /** @type {ComponentConstructor<typeof ConfigurableComponent>} */ (\n        this.constructor\n      )\n\n    if (!isObject(childConstructor.defaults)) {\n      throw new ConfigError(\n        formatErrorMessage(\n          childConstructor,\n          'Config passed as parameter into constructor but no defaults defined'\n        )\n      )\n    }\n\n    const datasetConfig = /** @type {Partial<ConfigurationType>} */ (\n      normaliseDataset(childConstructor, this.$root.dataset)\n    )\n\n    // Override defaults with JavaScript config\n    this.config = /** @type {ConfigurationType} */ (\n      mergeConfigs(childConstructor.defaults, config ?? {})\n    )\n\n    // Override merged config with dataset config\n    this.config = /** @type {ConfigurationType} */ (\n      mergeConfigs(\n        this.config,\n        this.configOverride(datasetConfig),\n        datasetConfig\n      )\n    )\n  }\n\n  /**\n   * Config override\n   *\n   * It should take a subset of configuration as input and return\n   * a new configuration object with properties that should be\n   * overridden based on the root element's dataset\n   *\n   * @abstract\n   * @param {Partial<ConfigurationType>} _datasetConfig - Config specified by dataset\n   * @returns {Partial<ConfigurationType>} Config to override by dataset\n   */\n  configOverride(_datasetConfig = {}) {\n    return {}\n  }\n}\n\n/**\n * @import { ObjectNested } from './common/configuration/index.mjs'\n * @import { ComponentConstructor } from './component.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\n\nconst DEBOUNCE_TIMEOUT_IN_SECONDS = 1\n\n/**\n * Button component\n *\n * @augments {ConfigurableComponent<ButtonConfig>}\n */\nexport class Button extends ConfigurableComponent {\n  /**\n   * @type {number | null}\n   */\n  debounceFormSubmitTimer = null\n\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<ButtonConfig>} [config] - Button config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    /**\n     * Initialise an event listener for keydown at document level\n     * this will help listening for later inserted elements with a role=\"button\"\n     */\n    this.$root.addEventListener('keydown', (event) => this.handleKeyDown(event))\n    this.$root.addEventListener('click', (event) => this.debounce(event))\n  }\n\n  /**\n   * JavaScript 'shim' to trigger the click event of element(s) when the space key is pressed.\n   *\n   * Created since some Assistive Technologies (for example some Screenreaders)\n   * will tell a user to press space on a 'button', so this functionality needs to be shimmed\n   * See https://github.com/alphagov/govuk_elements/pull/272#issuecomment-233028270\n   *\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  handleKeyDown(event) {\n    const target = event.target\n\n    // Handle space bar only\n    if (event.key !== ' ') {\n      return\n    }\n\n    // Handle elements with [role=\"button\"] only\n    if (\n      target instanceof HTMLElement &&\n      target.getAttribute('role') === 'button'\n    ) {\n      event.preventDefault()\n      target.click()\n    }\n  }\n\n  /**\n   * Debounce double-clicks\n   *\n   * If the click quickly succeeds a previous click then nothing will happen.\n   * This stops people accidentally causing multiple form submissions by\n   * double clicking buttons.\n   *\n   * @param {MouseEvent} event - Mouse click event\n   * @returns {undefined | false} Returns undefined, or false when debounced\n   */\n  debounce(event) {\n    // Check the button that was clicked has preventDoubleClick enabled\n    if (!this.config.preventDoubleClick) {\n      return\n    }\n\n    // If the timer is still running then we want to prevent the click from submitting the form\n    if (this.debounceFormSubmitTimer) {\n      event.preventDefault()\n      return false\n    }\n\n    this.debounceFormSubmitTimer = window.setTimeout(() => {\n      this.debounceFormSubmitTimer = null\n    }, DEBOUNCE_TIMEOUT_IN_SECONDS * 1000)\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-button'\n\n  /**\n   * Button default config\n   *\n   * @see {@link ButtonConfig}\n   * @constant\n   * @type {ButtonConfig}\n   */\n  static defaults = Object.freeze({\n    preventDoubleClick: false\n  })\n\n  /**\n   * Button config schema\n   *\n   * @constant\n   * @satisfies {Schema<ButtonConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      preventDoubleClick: { type: 'boolean' }\n    }\n  })\n}\n\n/**\n * Initialise button component\n *\n * @deprecated Use {@link createAll | `createAll(Button, options)`} instead.\n * @param {InitOptions & Partial<ButtonConfig>} [options]\n */\nexport function initButtons(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $buttons = $scope?.querySelectorAll(\n    `[data-module=\"${Button.moduleName}\"]`\n  )\n\n  $buttons?.forEach(($root) => {\n    new Button($root, options)\n  })\n}\n\n/**\n * Button config\n *\n * @typedef {object} ButtonConfig\n * @property {boolean} [preventDoubleClick=false] - Prevent accidental double\n *   clicks on submit buttons from submitting forms multiple times.\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { isObject } from './common/index.mjs'\n\n/**\n * Internationalisation\n *\n * Adds support for selecting messages to render, with placeholder\n * interpolation and locale-aware number formatting and pluralisation\n */\nexport class I18n {\n  /**\n   * @param {{ [key: string]: string | TranslationPluralForms }} translations - Key-value pairs of the translation strings to use.\n   * @param {object} [config] - Configuration options for the function.\n   * @param {string | null} [config.locale] - An overriding locale for the PluralRules functionality.\n   */\n  constructor(translations = {}, config = {}) {\n    // Make list of translations available throughout function\n    this.translations = translations\n\n    // The locale to use for PluralRules and NumberFormat\n    this.locale = config.locale ?? (document.documentElement.lang || 'en')\n  }\n\n  /**\n   * The most used function - takes the key for a given piece of UI text and\n   * returns the appropriate string.\n   *\n   * @param {string} lookupKey - The lookup key of the string to use.\n   * @param {{ [key: string]: unknown }} [options] - Any options passed with the translation string, e.g: for string interpolation.\n   * @returns {string} The appropriate translation string.\n   * @throws {Error} Lookup key required\n   * @throws {Error} Options required for `${}` placeholders\n   */\n  t(lookupKey, options) {\n    if (!lookupKey) {\n      // Print a console error if no lookup key has been provided\n      throw new Error('i18n: lookup key missing')\n    }\n\n    // Fetch the translation for that lookup key\n    let translation = this.translations[lookupKey]\n\n    // If the `count` option is set, determine which plural suffix is needed and\n    // change the lookupKey to match. We check to see if it's numeric instead of\n    // falsy, as this could legitimately be 0.\n    if (typeof options?.count === 'number' && isObject(translation)) {\n      const translationPluralForm =\n        translation[this.getPluralSuffix(lookupKey, options.count)]\n\n      // Update translation with plural suffix\n      if (translationPluralForm) {\n        translation = translationPluralForm\n      }\n    }\n\n    if (typeof translation === 'string') {\n      // Check for ${} placeholders in the translation string\n      // eslint-disable-next-line @typescript-eslint/prefer-regexp-exec\n      if (translation.match(/%{(.\\S+)}/)) {\n        if (!options) {\n          throw new Error(\n            'i18n: cannot replace placeholders in string if no option data provided'\n          )\n        }\n\n        return this.replacePlaceholders(translation, options)\n      }\n\n      return translation\n    }\n\n    // If the key wasn't found in our translations object,\n    // return the lookup key itself as the fallback\n    return lookupKey\n  }\n\n  /**\n   * Takes a translation string with placeholders, and replaces the placeholders\n   * with the provided data\n   *\n   * @param {string} translationString - The translation string\n   * @param {{ [key: string]: unknown }} options - Any options passed with the translation string, e.g: for string interpolation.\n   * @returns {string} The translation string to output, with $\\{\\} placeholders replaced\n   */\n  replacePlaceholders(translationString, options) {\n    const formatter = Intl.NumberFormat.supportedLocalesOf(this.locale).length\n      ? new Intl.NumberFormat(this.locale)\n      : undefined\n\n    return translationString.replace(\n      /%{(.\\S+)}/g,\n\n      /**\n       * Replace translation string placeholders\n       *\n       * @param {string} placeholderWithBraces - Placeholder with braces\n       * @param {string} placeholderKey - Placeholder key\n       * @returns {string} Placeholder value\n       */\n      function (placeholderWithBraces, placeholderKey) {\n        if (Object.prototype.hasOwnProperty.call(options, placeholderKey)) {\n          const placeholderValue = options[placeholderKey]\n\n          // If a user has passed `false` as the value for the placeholder\n          // treat it as though the value should not be displayed\n          if (\n            placeholderValue === false ||\n            (typeof placeholderValue !== 'number' &&\n              typeof placeholderValue !== 'string')\n          ) {\n            return ''\n          }\n\n          // If the placeholder's value is a number, localise the number formatting\n          if (typeof placeholderValue === 'number') {\n            return formatter\n              ? formatter.format(placeholderValue)\n              : `${placeholderValue}`\n          }\n\n          return placeholderValue\n        }\n\n        throw new Error(\n          `i18n: no data found to replace ${placeholderWithBraces} placeholder in string`\n        )\n      }\n    )\n  }\n\n  /**\n   * Check to see if the browser supports Intl.PluralRules\n   *\n   * It requires all conditions to be met in order to be supported:\n   * - The implementation of Intl supports PluralRules (NOT true in Safari 10â€“12)\n   * - The browser/OS has plural rules for the current locale (browser dependent)\n   *\n   * {@link https://browsersl.ist/#q=supports+es6-module+and+not+supports+intl-pluralrules}\n   *\n   * @returns {boolean} Returns true if all conditions are met. Returns false otherwise.\n   */\n  hasIntlPluralRulesSupport() {\n    return Boolean(\n      'PluralRules' in window.Intl &&\n        Intl.PluralRules.supportedLocalesOf(this.locale).length\n    )\n  }\n\n  /**\n   * Get the appropriate suffix for the plural form.\n   *\n   * Uses Intl.PluralRules (or our own fallback implementation) to get the\n   * 'preferred' form to use for the given count.\n   *\n   * Checks that a translation has been provided for that plural form â€“ if it\n   * hasn't, it'll fall back to the 'other' plural form (unless that doesn't exist\n   * either, in which case an error will be thrown)\n   *\n   * @param {string} lookupKey - The lookup key of the string to use.\n   * @param {number} count - Number used to determine which pluralisation to use.\n   * @returns {PluralRule} The suffix associated with the correct pluralisation for this locale.\n   * @throws {Error} Plural form `.other` required when preferred plural form is missing\n   */\n  getPluralSuffix(lookupKey, count) {\n    // Validate that the number is actually a number.\n    //\n    // Number(count) will turn anything that can't be converted to a Number type\n    // into 'NaN'. isFinite filters out NaN, as it isn't a finite number.\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-conversion\n    count = Number(count)\n    if (!isFinite(count)) {\n      return 'other'\n    }\n\n    // Fetch the translation for that lookup key\n    const translation = this.translations[lookupKey]\n\n    // Check to verify that all the requirements for Intl.PluralRules are met.\n    // If so, we can use that instead of our custom implementation. Otherwise,\n    // use the hardcoded fallback.\n    const preferredForm = this.hasIntlPluralRulesSupport()\n      ? new Intl.PluralRules(this.locale).select(count)\n      : 'other'\n\n    // Use the correct plural form if provided\n    if (isObject(translation)) {\n      if (preferredForm in translation) {\n        return preferredForm\n        // Fall back to `other` if the plural form is missing, but log a warning\n        // to the console\n      } else if ('other' in translation) {\n        console.warn(\n          `i18n: Missing plural form \".${preferredForm}\" for \"${this.locale}\" locale. Falling back to \".other\".`\n        )\n\n        return 'other'\n      }\n    }\n\n    // If the required `other` plural form is missing, all we can do is error\n    throw new Error(\n      `i18n: Plural form \".other\" is required for \"${this.locale}\" locale`\n    )\n  }\n}\n\n/**\n * Plural rule category mnemonic tags\n *\n * @typedef {'zero' | 'one' | 'two' | 'few' | 'many' | 'other'} PluralRule\n */\n\n/**\n * Translated message by plural rule they correspond to.\n *\n * Allows to group pluralised messages under a single key when passing\n * translations to a component's constructor\n *\n * @typedef {object} TranslationPluralForms\n * @property {string} [other] - General plural form\n * @property {string} [zero] - Plural form used with 0\n * @property {string} [one] - Plural form used with 1\n * @property {string} [two] - Plural form used with 2\n * @property {string} [few] - Plural form used for a few\n * @property {string} [many] - Plural form used for many\n */\n","import { closestAttributeValue } from '../../common/closest-attribute-value.mjs'\nimport {\n  normaliseOptions,\n  validateConfig\n} from '../../common/configuration/index.mjs'\nimport { formatErrorMessage } from '../../common/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ConfigError, ElementError } from '../../errors/index.mjs'\nimport { I18n } from '../../i18n.mjs'\n\n/**\n * Character count component\n *\n * Tracks the number of characters or words in the `.nhsuk-js-character-count`\n * `<textarea>` inside the element. Displays a message with the remaining number\n * of characters/words available, or the number of characters/words in excess.\n *\n * You can configure the message to only appear after a certain percentage\n * of the available characters/words has been entered.\n *\n * @augments {ConfigurableComponent<CharacterCountConfig>}\n */\nexport class CharacterCount extends ConfigurableComponent {\n  /**\n   * @type {number | null}\n   */\n  lastInputTimestamp = null\n  lastInputValue = ''\n\n  /**\n   * @type {number | null}\n   */\n  valueChecker = null\n\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<CharacterCountConfig>} [config] - Character count config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $textarea = this.$root.querySelector('.nhsuk-js-character-count')\n    if (\n      !(\n        $textarea instanceof HTMLTextAreaElement ||\n        $textarea instanceof HTMLInputElement\n      )\n    ) {\n      throw new ElementError({\n        component: CharacterCount,\n        element: $textarea,\n        expectedType: 'HTMLTextareaElement or HTMLInputElement',\n        identifier: 'Form field (`.nhsuk-js-character-count`)'\n      })\n    }\n\n    // Check for valid config\n    const errors = validateConfig(CharacterCount.schema, this.config)\n    if (errors[0]) {\n      throw new ConfigError(formatErrorMessage(CharacterCount, errors[0]))\n    }\n\n    const {\n      i18n,\n      maxwords,\n      maxlength,\n      screenReaderCountMessageClass,\n      textareaDescriptionClass,\n      visibleCountMessageClass\n    } = this.config\n\n    this.i18n = new I18n(i18n, {\n      // Read the fallback if necessary rather than have it set in the defaults\n      locale: closestAttributeValue(this.$root, 'lang')\n    })\n\n    // Determine the limit attribute (characters or words)\n    this.maxLength = maxwords ?? maxlength ?? Infinity\n\n    this.$textarea = $textarea\n\n    const textareaDescriptionId = `${this.$textarea.id}-info`\n    const $textareaDescription = document.getElementById(textareaDescriptionId)\n    if (!$textareaDescription) {\n      throw new ElementError({\n        component: CharacterCount,\n        element: $textareaDescription,\n        identifier: `Count message (\\`id=\"${textareaDescriptionId}\"\\`)`\n      })\n    }\n\n    // Pre-existing validation error rendered from server\n    this.$errorMessage = this.$root.querySelector('.nhsuk-error-message')\n\n    // Inject a description for the textarea if none is present already\n    // for when the component was rendered with no maxlength, maxwords\n    // nor custom textareaDescriptionText\n    if (/^\\s*$/.exec($textareaDescription.textContent)) {\n      $textareaDescription.textContent = this.i18n.t('textareaDescription', {\n        count: this.maxLength\n      })\n    }\n\n    // Move the textarea description to be immediately after the textarea\n    // Kept for backwards compatibility\n    this.$textarea.insertAdjacentElement('afterend', $textareaDescription)\n\n    // Create the *screen reader* specific live-updating counter\n    // This doesn't need any styling classes, as it is never visible\n    this.$screenReaderCountMessage = document.createElement('div')\n    this.$screenReaderCountMessage.setAttribute('aria-live', 'polite')\n    this.$screenReaderCountMessage.classList.add(\n      screenReaderCountMessageClass,\n      'nhsuk-u-visually-hidden'\n    )\n\n    $textareaDescription.insertAdjacentElement(\n      'afterend',\n      this.$screenReaderCountMessage\n    )\n\n    // Create our live-updating counter element, copying the classes from the\n    // textarea description for backwards compatibility as these may have been\n    // configured\n    this.$visibleCountMessage = document.createElement('div')\n    this.$visibleCountMessage.setAttribute('aria-hidden', 'true')\n    this.$visibleCountMessage.setAttribute('hidden', '')\n    this.$visibleCountMessage.className = $textareaDescription.className\n    this.$visibleCountMessage.classList.add(visibleCountMessageClass)\n    this.$visibleCountMessage.classList.remove(textareaDescriptionClass)\n\n    $textareaDescription.insertAdjacentElement(\n      'afterend',\n      this.$visibleCountMessage\n    )\n\n    // Hide the textarea description\n    $textareaDescription.classList.add('nhsuk-u-visually-hidden')\n\n    // Remove hard limit if set\n    this.$textarea.removeAttribute('maxlength')\n\n    this.bindChangeEvents()\n\n    // When the page is restored after navigating 'back' in some browsers the\n    // state of form controls is not restored until *after* the DOMContentLoaded\n    // event is fired, so we need to sync after the pageshow event.\n    window.addEventListener('pageshow', () => this.updateCountMessage())\n\n    // Although we've set up handlers to sync state on the pageshow event, init\n    // could be called after those events have fired, for example if they are\n    // added to the page dynamically, so update now too.\n    this.updateCountMessage()\n  }\n\n  /**\n   * Character count config override\n   *\n   * To ensure data-attributes take complete precedence, even if they change\n   * the type of count, we need to reset the `maxlength` and `maxwords` from\n   * the JavaScript config.\n   *\n   * @param {Partial<CharacterCountConfig>} datasetConfig - Config specified by dataset\n   * @returns {Partial<CharacterCountConfig>} Config to override by dataset\n   */\n  configOverride(datasetConfig) {\n    let configOverrides = {}\n    if ('maxwords' in datasetConfig || 'maxlength' in datasetConfig) {\n      configOverrides = {\n        maxlength: undefined,\n        maxwords: undefined\n      }\n    }\n\n    return configOverrides\n  }\n\n  /**\n   * Count the number of characters (or words, if `config.maxwords` is set)\n   * in the given text\n   *\n   * @param {string} text - The text to count the characters of\n   * @returns {number} the number of characters (or words) in the text\n   */\n  count(text) {\n    if (this.config.maxwords) {\n      const tokens = text.match(/\\S+/g) ?? [] // Matches consecutive non-whitespace chars\n      return tokens.length\n    }\n\n    return text.length\n  }\n\n  /**\n   * Bind change events\n   *\n   * Set up event listeners on the $textarea so that the count messages update\n   * when the user types.\n   */\n  bindChangeEvents() {\n    this.$textarea.addEventListener('keyup', () => this.handleKeyUp())\n\n    // Bind focus/blur events to start/stop polling\n    this.$textarea.addEventListener('focus', () => this.handleFocus())\n    this.$textarea.addEventListener('blur', () => this.handleBlur())\n  }\n\n  /**\n   * Update count message if textarea value has changed\n   */\n  checkIfValueChanged() {\n    if (this.$textarea.value !== this.lastInputValue) {\n      this.lastInputValue = this.$textarea.value\n      this.updateCountMessage()\n    }\n  }\n\n  /**\n   * Update count message\n   *\n   * Helper function to update both the visible and screen reader-specific\n   * counters simultaneously (e.g. on init)\n   */\n  updateCountMessage() {\n    this.updateVisibleCountMessage()\n    this.updateScreenReaderCountMessage()\n  }\n\n  /**\n   * Update visible count message\n   */\n  updateVisibleCountMessage() {\n    const remainingNumber = this.maxLength - this.count(this.$textarea.value)\n    const isError = remainingNumber < 0\n\n    // If input is over the threshold, show the count message\n    if (this.isOverThreshold()) {\n      this.$visibleCountMessage.removeAttribute('hidden')\n    } else {\n      this.$visibleCountMessage.setAttribute('hidden', '')\n    }\n\n    // Update styles\n    if (!this.$errorMessage) {\n      // Only toggle the textarea error class if there isn't an error message\n      // already, as it may be unrelated to the limit (eg: allowed characters)\n      // and would set the border colour back to black.\n      this.$textarea.classList.toggle('nhsuk-textarea--error', isError)\n    }\n    this.$visibleCountMessage.classList.toggle('nhsuk-error-message', isError)\n    this.$visibleCountMessage.classList.toggle('nhsuk-hint', !isError)\n\n    // Update message\n    this.$visibleCountMessage.textContent = this.formattedUpdateMessage()\n  }\n\n  /**\n   * Update screen reader count message\n   */\n  updateScreenReaderCountMessage() {\n    // If over the threshold, remove the aria-hidden attribute, allowing screen\n    // readers to announce the content of the element.\n    if (this.isOverThreshold()) {\n      this.$screenReaderCountMessage.removeAttribute('aria-hidden')\n    } else {\n      this.$screenReaderCountMessage.setAttribute('aria-hidden', 'true')\n    }\n\n    // Update message\n    this.$screenReaderCountMessage.textContent = this.formattedUpdateMessage()\n  }\n\n  /**\n   * Get count message\n   *\n   * @returns {string} Status message\n   */\n  formattedUpdateMessage() {\n    const remainingNumber = this.maxLength - this.count(this.$textarea.value)\n    const countType = this.config.maxwords ? 'words' : 'characters'\n    return this.formatCountMessage(remainingNumber, countType)\n  }\n\n  /**\n   * Formats the message shown to users according to what's counted\n   * and how many remain\n   *\n   * @param {number} remainingNumber - The number of words/characaters remaining\n   * @param {string} countType - \"words\" or \"characters\"\n   * @returns {string} Status message\n   */\n  formatCountMessage(remainingNumber, countType) {\n    if (remainingNumber === 0) {\n      return this.i18n.t(`${countType}AtLimit`)\n    }\n\n    const translationKeySuffix =\n      remainingNumber < 0 ? 'OverLimit' : 'UnderLimit'\n\n    return this.i18n.t(`${countType}${translationKeySuffix}`, {\n      count: Math.abs(remainingNumber)\n    })\n  }\n\n  /**\n   * Check if count is over threshold\n   *\n   * Checks whether the value is over the configured threshold for the input.\n   * If there is no configured threshold, it is set to 0 and this function will\n   * always return true.\n   *\n   * @returns {boolean} true if the current count is over the config.threshold\n   *   (or no threshold is set)\n   */\n  isOverThreshold() {\n    // No threshold means we're always above threshold so save some computation\n    if (!this.config.threshold) {\n      return true\n    }\n\n    // Determine the remaining number of characters/words\n    const currentLength = this.count(this.$textarea.value)\n    const maxLength = this.maxLength\n\n    const thresholdValue = (maxLength * this.config.threshold) / 100\n\n    return thresholdValue <= currentLength\n  }\n\n  /**\n   * Handle key up event\n   *\n   * Update the visible character counter and keep track of when the last update\n   * happened for each keypress\n   */\n  handleKeyUp() {\n    this.updateVisibleCountMessage()\n    this.lastInputTimestamp = Date.now()\n  }\n\n  /**\n   * Handle focus event\n   *\n   * Speech recognition software such as Dragon NaturallySpeaking will modify\n   * the fields by directly changing its `value`. These changes don't trigger\n   * events in JavaScript, so we need to poll to handle when and if they occur.\n   *\n   * Once the keyup event hasn't been detected for at least 1000 ms (1s), check\n   * if the textarea value has changed and update the count message if it has.\n   *\n   * This is so that the update triggered by the manual comparison doesn't\n   * conflict with debounced KeyboardEvent updates.\n   */\n  handleFocus() {\n    this.valueChecker = window.setInterval(() => {\n      if (\n        !this.lastInputTimestamp ||\n        Date.now() - 500 >= this.lastInputTimestamp\n      ) {\n        this.checkIfValueChanged()\n      }\n    }, 1000)\n  }\n\n  /**\n   * Handle blur event\n   *\n   * Stop checking the textarea value once the textarea no longer has focus\n   */\n  handleBlur() {\n    // Cancel value checking on blur\n    if (this.valueChecker) {\n      window.clearInterval(this.valueChecker)\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-character-count'\n\n  /**\n   * Character count default config\n   *\n   * @see {@link CharacterCountConfig}\n   * @constant\n   * @type {CharacterCountConfig}\n   */\n  static defaults = Object.freeze({\n    threshold: 0,\n    textareaDescriptionClass: 'nhsuk-character-count__message',\n    visibleCountMessageClass: 'nhsuk-character-count__status',\n    screenReaderCountMessageClass: 'nhsuk-character-count__sr-status',\n    i18n: {\n      // Characters\n      charactersUnderLimit: {\n        one: 'You have %{count} character remaining',\n        other: 'You have %{count} characters remaining'\n      },\n      charactersAtLimit: 'You have 0 characters remaining',\n      charactersOverLimit: {\n        one: 'You have %{count} character too many',\n        other: 'You have %{count} characters too many'\n      },\n      // Words\n      wordsUnderLimit: {\n        one: 'You have %{count} word remaining',\n        other: 'You have %{count} words remaining'\n      },\n      wordsAtLimit: 'You have 0 words remaining',\n      wordsOverLimit: {\n        one: 'You have %{count} word too many',\n        other: 'You have %{count} words too many'\n      },\n      textareaDescription: {\n        other: ''\n      }\n    }\n  })\n\n  /**\n   * Character count config schema\n   *\n   * @constant\n   * @satisfies {Schema<CharacterCountConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      maxwords: { type: 'number' },\n      maxlength: { type: 'number' },\n      threshold: { type: 'number' },\n      textareaDescriptionClass: { type: 'string' },\n      visibleCountMessageClass: { type: 'string' },\n      screenReaderCountMessageClass: { type: 'string' },\n      i18n: { type: 'object' }\n    },\n    anyOf: [\n      {\n        required: ['maxwords'],\n        errorMessage: 'Either \"maxlength\" or \"maxwords\" must be provided'\n      },\n      {\n        required: ['maxlength'],\n        errorMessage: 'Either \"maxlength\" or \"maxwords\" must be provided'\n      }\n    ]\n  })\n}\n\n/**\n * Initialise character count component\n *\n * @deprecated Use {@link createAll | `createAll(CharacterCount, options)`} instead.\n * @param {InitOptions & Partial<CharacterCountConfig>} [options]\n */\nexport function initCharacterCounts(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $characterCounts = $scope?.querySelectorAll(\n    `[data-module=\"${CharacterCount.moduleName}\"]`\n  )\n\n  $characterCounts?.forEach(($root) => {\n    new CharacterCount($root, options)\n  })\n}\n\n/**\n * Character count config\n *\n * @see {@link CharacterCount.defaults}\n * @typedef {object} CharacterCountConfig\n * @property {number} [maxlength] - The maximum number of characters.\n *   If maxwords is provided, the maxlength option will be ignored.\n * @property {number} [maxwords] - The maximum number of words. If maxwords is\n *   provided, the maxlength option will be ignored.\n * @property {number} [threshold=0] - The percentage value of the limit at\n *   which point the count message is displayed. If this attribute is set, the\n *   count message will be hidden by default.\n * @property {string} textareaDescriptionClass - Textarea description class\n * @property {string} visibleCountMessageClass - Visible count message class\n * @property {string} screenReaderCountMessageClass - Screen reader count message class\n * @property {CharacterCountTranslations} [i18n=CharacterCount.defaults.i18n] - Character count translations\n */\n\n/**\n * Character count translations\n *\n * @see {@link CharacterCount.defaults.i18n}\n * @see {@link https://github.com/nhsuk/nhsuk-frontend/blob/main/docs/configuration/localisation.md}\n * @typedef {object} CharacterCountTranslations\n *\n * Messages shown to users as they type. It provides feedback on how many words\n * or characters they have remaining or if they are over the limit. This also\n * includes a message used as an accessible description for the textarea.\n * @property {TranslationPluralForms} [charactersUnderLimit] - Message displayed\n *   when the number of characters is under the configured maximum, `maxlength`.\n *   This message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining characters. This is a pluralised list of messages.\n * @property {string} [charactersAtLimit] - Message displayed when the number of\n *   characters reaches the configured maximum, `maxlength`. This message is\n *   displayed visually and through assistive technologies.\n * @property {TranslationPluralForms} [charactersOverLimit] - Message displayed\n *   when the number of characters is over the configured maximum, `maxlength`.\n *   This message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining characters. This is a pluralised list of messages.\n * @property {TranslationPluralForms} [wordsUnderLimit] - Message displayed when\n *   the number of words is under the configured maximum, `maxlength`. This\n *   message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining words. This is a pluralised list of messages.\n * @property {string} [wordsAtLimit] - Message displayed when the number of\n *   words reaches the configured maximum, `maxlength`. This message is\n *   displayed visually and through assistive technologies.\n * @property {TranslationPluralForms} [wordsOverLimit] - Message displayed when\n *   the number of words is over the configured maximum, `maxlength`. This\n *   message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining words. This is a pluralised list of messages.\n * @property {TranslationPluralForms} [textareaDescription] - Message made\n *   available to assistive technologies, if none is already present in the\n *   HTML, to describe that the component accepts only a limited amount of\n *   content. It is visible on the page when JavaScript is unavailable. The\n *   component will replace the `%{count}` placeholder with the value of the\n *   `maxlength` or `maxwords` parameter.\n */\n\n/**\n * @import { TranslationPluralForms } from '../../i18n.mjs'\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { toggleConditionalInput } from '../../common/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\n\n/**\n * Checkboxes component\n *\n * Test at {@link http://localhost:3000/nhsuk-frontend/components/checkboxes/with-conditional-content/}\n *\n * @augments {ConfigurableComponent<CheckboxesConfig>}\n */\nexport class Checkboxes extends ConfigurableComponent {\n  /**\n   * Checkboxes can be associated with a 'conditionally revealed' content block\n   * â€“ for example, a checkbox for 'Phone' could reveal an additional form field\n   * for the user to enter their phone number.\n   *\n   * These associations are made using a `data-aria-controls` attribute, which\n   * is promoted to an aria-controls attribute during initialisation.\n   *\n   * We also need to restore the state of any conditional reveals on the page\n   * (for example if the user has navigated back), and set up event handlers to\n   * keep the reveal in sync with the checkbox state.\n   *\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<CheckboxesConfig>} [config] - Checkboxes config\n   */\n  constructor($root, config) {\n    super($root, config)\n\n    const $inputs = this.$root.querySelectorAll('input[type=\"checkbox\"]')\n    if (!$inputs.length) {\n      throw new ElementError({\n        component: Checkboxes,\n        identifier: 'Form inputs (`<input type=\"checkbox\">`)'\n      })\n    }\n\n    this.$inputs = $inputs\n\n    this.$inputs.forEach(($input) => {\n      const targetId =\n        $input.dataset.ariaControls ?? $input.getAttribute('aria-controls')\n\n      // Skip checkboxes without data-aria-controls attributes\n      if (!targetId) {\n        return\n      }\n\n      // Throw if target conditional element does not exist.\n      if (!document.getElementById(targetId)) {\n        throw new ElementError({\n          component: Checkboxes,\n          identifier: `Conditional reveal (\\`id=\"${targetId}\"\\`)`\n        })\n      }\n\n      // Promote the data-aria-controls attribute to an aria-controls attribute\n      // so that the relationship is exposed in the AOM\n      if (!$input.hasAttribute('aria-controls')) {\n        $input.setAttribute('aria-controls', targetId)\n        delete $input.dataset.ariaControls\n      }\n    })\n\n    // When the page is restored after navigating 'back' in some browsers the\n    // state of form controls is not restored until *after* the DOMContentLoaded\n    // event is fired, so we need to sync after the pageshow event.\n    window.addEventListener('pageshow', () => this.syncAllConditionalReveals())\n\n    // Although we've set up handlers to sync state on the pageshow event, init\n    // could be called after those events have fired, for example if they are\n    // added to the page dynamically, so sync now too.\n    this.syncAllConditionalReveals()\n\n    // Handle events\n    this.$root.addEventListener('click', (event) => this.handleClick(event))\n  }\n\n  /**\n   * Sync the conditional reveal states for all checkboxes in this component.\n   */\n  syncAllConditionalReveals() {\n    this.$inputs.forEach(($input) =>\n      this.syncConditionalRevealWithInputState($input)\n    )\n  }\n\n  /**\n   * Sync conditional reveal with the input state\n   *\n   * Synchronise the visibility of the conditional reveal, and its accessible\n   * state, with the input's checked state.\n   *\n   * @param {HTMLInputElement} $input - Checkbox input\n   */\n  syncConditionalRevealWithInputState($input) {\n    const { conditionalClass } = this.config\n    toggleConditionalInput($input, `${conditionalClass}--hidden`)\n  }\n\n  /**\n   * Uncheck other checkboxes\n   *\n   * Find any other checkbox inputs with the checkbox group value, and uncheck them.\n   * This is useful for when a â€œNone of these\" checkbox is checked.\n   *\n   * @param {HTMLInputElement} $input - Checkbox input\n   */\n  unCheckAllInputsExcept($input) {\n    const { checkboxExclusiveGroup: exclusiveGroup } = $input.dataset\n\n    const selectorGroup = exclusiveGroup\n      ? `[data-checkbox-exclusive-group=\"${exclusiveGroup}\"]`\n      : `[name=\"${$input.name}\"]`\n\n    const allInputsWithSameName = document.querySelectorAll(\n      `input[type=\"checkbox\"]${selectorGroup}`\n    )\n\n    allInputsWithSameName.forEach(($inputWithSameName) => {\n      const hasSameFormOwner = $input.form === $inputWithSameName.form\n\n      // Uncheck all with same exclusive group by default, otherwise fall back to\n      // GOV.UK Frontend behaviour to uncheck all with the same name attribute\n      if (hasSameFormOwner && $inputWithSameName !== $input) {\n        this.setInputState($inputWithSameName, false, exclusiveGroup)\n      }\n    })\n  }\n\n  /**\n   * Uncheck exclusive inputs\n   *\n   * Find any checkbox inputs with the same checkbox group value and the 'exclusive' behaviour,\n   * and uncheck them. This helps prevent someone checking both a regular checkbox and a\n   * \"None of these\" checkbox in the same fieldset.\n   *\n   * @param {HTMLInputElement} $input - Checkbox input\n   */\n  unCheckExclusiveInputs($input) {\n    const { checkboxExclusiveGroup: exclusiveGroup } = $input.dataset\n\n    const selectorGroup = exclusiveGroup\n      ? `[data-checkbox-exclusive-group=\"${exclusiveGroup}\"]`\n      : `[name=\"${$input.name}\"]`\n\n    const allInputsWithSameNameAndExclusiveBehaviour =\n      document.querySelectorAll(\n        `input[type=\"checkbox\"][data-checkbox-exclusive]${selectorGroup}`\n      )\n\n    allInputsWithSameNameAndExclusiveBehaviour.forEach(($exclusiveInput) => {\n      const hasSameFormOwner = $input.form === $exclusiveInput.form\n\n      // Uncheck the exclusive input only. When no group is set, fall back to\n      // GOV.UK Frontend behaviour and locate the exclusive input by name\n      if (hasSameFormOwner) {\n        this.setInputState($exclusiveInput, false, exclusiveGroup)\n      }\n    })\n  }\n\n  /**\n   * Set input state, optionally for matching exclusive group only\n   *\n   * @param {HTMLInputElement} $input - Checkbox input\n   * @param {boolean} checked - Checkbox checked state\n   * @param {string} [exclusiveGroup] - Set state for matching exclusive group only (optional)\n   */\n  setInputState($input, checked, exclusiveGroup) {\n    const { checkboxExclusiveGroup } = $input.dataset\n\n    // Skip input when exclusive group does not match\n    if (\n      exclusiveGroup &&\n      checkboxExclusiveGroup &&\n      checkboxExclusiveGroup !== exclusiveGroup\n    ) {\n      return\n    }\n\n    $input.checked = checked\n    this.syncConditionalRevealWithInputState($input)\n  }\n\n  /**\n   * Toggle classes and attributes\n   *\n   * @param {MouseEvent} event - Click event\n   */\n  handleClick(event) {\n    const $clickedInput = event.target\n\n    // Ignore clicks on things that aren't checkbox inputs\n    if (\n      !($clickedInput instanceof HTMLInputElement) ||\n      $clickedInput.type !== 'checkbox'\n    ) {\n      return\n    }\n\n    // If the checkbox conditionally-reveals some content, sync the state\n    const hasAriaControls = $clickedInput.getAttribute('aria-controls')\n    if (hasAriaControls) {\n      this.syncConditionalRevealWithInputState($clickedInput)\n    }\n\n    // No further behaviour needed for unchecking\n    if (!$clickedInput.checked) {\n      return\n    }\n\n    // Handle 'exclusive' checkbox behaviour (ie \"None of these\")\n    if ('checkboxExclusive' in $clickedInput.dataset) {\n      this.unCheckAllInputsExcept($clickedInput)\n    } else {\n      this.unCheckExclusiveInputs($clickedInput)\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-checkboxes'\n\n  /**\n   * Radios default config\n   *\n   * @see {@link CheckboxesConfig}\n   * @constant\n   * @type {CheckboxesConfig}\n   */\n  static defaults = Object.freeze({\n    conditionalClass: 'nhsuk-checkboxes__conditional'\n  })\n\n  /**\n   * Checkboxes config schema\n   *\n   * @constant\n   * @satisfies {Schema<CheckboxesConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      conditionalClass: { type: 'string' }\n    }\n  })\n}\n\n/**\n * Initialise checkboxes component\n *\n * @deprecated Use {@link createAll | `createAll(Checkboxes, options)`} instead.\n * @param {InitOptions & Partial<CheckboxesConfig>} [options]\n */\nexport function initCheckboxes(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $checkboxes = $scope?.querySelectorAll(\n    `[data-module=\"${Checkboxes.moduleName}\"]`\n  )\n\n  $checkboxes?.forEach(($root) => {\n    new Checkboxes($root, options)\n  })\n}\n\n/**\n * Checkboxes config\n *\n * @typedef {object} CheckboxesConfig\n * @property {string} conditionalClass - Conditionally revealed content class\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { formatErrorMessage, setFocus } from '../../common/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\n\n/**\n * Error summary component\n *\n * Adapted from https://github.com/alphagov/govuk-frontend/blob/v2.13.0/src/components/error-summary/error-summary.js\n *\n * @augments {ConfigurableComponent<ErrorSummaryConfig>}\n */\nexport class ErrorSummary extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<ErrorSummaryConfig>} [config] - Error summary config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    /**\n     * Focus the error summary\n     */\n    if (!this.config.disableAutoFocus) {\n      setFocus(this.$root)\n    }\n\n    this.$root.addEventListener('click', (event) => this.handleClick(event))\n  }\n\n  /**\n   * Error summary config override\n   *\n   * @param {Partial<ErrorSummaryConfig>} _datasetConfig - Config specified by dataset\n   * @returns {Partial<ErrorSummaryConfig>} Config to override by dataset\n   */\n  configOverride(_datasetConfig) {\n    let configOverrides = /** @type {Partial<ErrorSummaryConfig>} */ ({})\n\n    if ('focusOnPageLoad' in this.config) {\n      console.warn(\n        formatErrorMessage(\n          ErrorSummary,\n          'Option `focusOnPageLoad` is deprecated. Use `disableAutoFocus` instead.'\n        )\n      )\n\n      configOverrides.disableAutoFocus = !this.config.focusOnPageLoad\n    }\n\n    return configOverrides\n  }\n\n  /**\n   * Get associated legend or label\n   *\n   * Returns the first element that exists from this list:\n   *\n   * - The `<legend>` associated with the closest `<fieldset>` ancestor, as long\n   *   as the top of it is no more than half a viewport height away from the\n   *   bottom of the input\n   * - The first `<label>` that is associated with the input using for=\"inputId\"\n   * - The closest parent `<label>`\n   *\n   * @param {Element} $input - The input\n   * @returns {Element | null} Associated legend or label, or null if no\n   *   associated legend or label can be found\n   */\n  getAssociatedLegendOrLabel($input) {\n    const $fieldset = $input.closest('fieldset')\n\n    if ($fieldset) {\n      const $legends = $fieldset.getElementsByTagName('legend')\n\n      if ($legends.length) {\n        const $candidateLegend = $legends[0]\n\n        // If the input type is radio or checkbox, always use the legend if\n        // there is one.\n        if (\n          $input instanceof HTMLInputElement &&\n          ($input.type === 'checkbox' || $input.type === 'radio')\n        ) {\n          return $candidateLegend\n        }\n\n        // For other input types, only scroll to the fieldsetâ€™s legend (instead\n        // of the label associated with the input) if the input would end up in\n        // the top half of the screen.\n        //\n        // This should avoid situations where the input either ends up off the\n        // screen, or obscured by a software keyboard.\n        const legendTop = $candidateLegend.getBoundingClientRect().top\n        const inputRect = $input.getBoundingClientRect()\n\n        // If the browser doesn't support Element.getBoundingClientRect().height\n        // or window.innerHeight (like IE8), bail and just link to the label.\n        if (inputRect.height && window.innerHeight) {\n          const inputBottom = inputRect.top + inputRect.height\n\n          if (inputBottom - legendTop < window.innerHeight / 2) {\n            return $candidateLegend\n          }\n        }\n      }\n    }\n\n    return (\n      document.querySelector(`label[for='${$input.getAttribute('id')}']`) ??\n      $input.closest('label')\n    )\n  }\n\n  /**\n   * Focus the target element\n   *\n   * By default, the browser will scroll the target into view. Because our\n   * labels or legends appear above the input, this means the user will be\n   * presented with an input without any context, as the label or legend will be\n   * off the top of the screen.\n   *\n   * Manually handling the click event, scrolling the question into view and\n   * then focussing the element solves this.\n   *\n   * This also results in the label and/or legend being announced correctly in\n   * NVDA (as tested in 2018.3.2) - without this only the field type is\n   * announced (e.g. \"Edit, has autocomplete\").\n   *\n   * @param {EventTarget} $target - Event target\n   * @returns {boolean} True if the target was able to be focussed\n   */\n  focusTarget($target) {\n    // If the element that was clicked was not a link, return early\n    if (!($target instanceof HTMLAnchorElement)) {\n      return false\n    }\n\n    const inputId = $target.hash.replace('#', '')\n    if (!inputId) {\n      return false\n    }\n\n    const $input = document.getElementById(inputId)\n    if (!$input) {\n      return false\n    }\n\n    const $legendOrLabel = this.getAssociatedLegendOrLabel($input)\n    if (!$legendOrLabel) {\n      return false\n    }\n\n    // Scroll the legend or label into view *before* calling focus on the input\n    // to avoid extra scrolling in browsers that don't support `preventScroll`\n    // (which at time of writing is most of them...)\n    $legendOrLabel.scrollIntoView()\n    $input.focus({ preventScroll: true })\n\n    return true\n  }\n\n  /**\n   * Click event handler\n   *\n   * @param {MouseEvent} event - Click event\n   */\n  handleClick(event) {\n    const $target = event.target\n    if ($target && this.focusTarget($target)) {\n      event.preventDefault()\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-error-summary'\n\n  /**\n   * Error summary default config\n   *\n   * @see {@link ErrorSummaryConfig}\n   * @constant\n   * @type {ErrorSummaryConfig}\n   */\n  static defaults = Object.freeze({\n    disableAutoFocus: false\n  })\n\n  /**\n   * Error summary config schema\n   *\n   * @constant\n   * @satisfies {Schema<ErrorSummaryConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      focusOnPageLoad: { type: 'boolean' }, // Deprecated\n      disableAutoFocus: { type: 'boolean' }\n    }\n  })\n}\n\n/**\n * Initialise error summary component\n *\n * @deprecated Use {@link createAll | `createAll(ErrorSummary, options)`} instead.\n * @param {InitOptions & Partial<ErrorSummaryConfig>} [options]\n */\nexport function initErrorSummary(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $root = $scope?.querySelector(\n    `[data-module=\"${ErrorSummary.moduleName}\"]`\n  )\n\n  if (!$root) {\n    return\n  }\n\n  new ErrorSummary($root, options)\n}\n\n/**\n * Error summary config\n *\n * @see {@link ErrorSummary.defaults}\n * @typedef {object} ErrorSummaryConfig\n * @property {boolean} [focusOnPageLoad=true] - Deprecated. Use `disableAutoFocus` instead.\n * @property {boolean} [disableAutoFocus=false] - If set to `true` the error\n *   summary will not be focussed when the page loads.\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { closestAttributeValue } from '../../common/closest-attribute-value.mjs'\nimport { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\nimport { I18n } from '../../i18n.mjs'\n\n/**\n * File upload component\n *\n * @augments {ConfigurableComponent<FileUploadConfig>}\n */\nexport class FileUpload extends ConfigurableComponent {\n  /**\n   * @type {boolean | undefined}\n   */\n  enteredAnotherElement\n\n  /**\n   * @param {Element | null} $root - File input element\n   * @param {Partial<FileUploadConfig>} [config] - File Upload config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $input = this.$root.querySelector('input')\n\n    if (!($input instanceof HTMLInputElement)) {\n      throw new ElementError({\n        component: FileUpload,\n        element: $input,\n        expectedType: 'HTMLInputElement',\n        identifier: 'Form field (`<input>`)'\n      })\n    }\n\n    if ($input.type !== 'file') {\n      throw new ElementError({\n        component: FileUpload,\n        element: $input,\n        identifier: 'Form field (`<input>`)',\n        expectedType: 'HTMLInputElement with attribute (`type=\"file\"`)'\n      })\n    }\n\n    this.$input = $input\n\n    if (!this.$input.id) {\n      throw new ElementError({\n        component: FileUpload,\n        identifier: 'File input (`<input type=\"file\">`) attribute (`id`)'\n      })\n    }\n\n    this.id = this.$input.id\n\n    const {\n      i18n,\n      dropZoneClass,\n      dropButtonClass,\n      dropButtonGroupClass,\n      dropInstructionClass,\n      chooseFilesButtonClass,\n      chooseFilesButtonClassList,\n      announcementsClass,\n      statusClass\n    } = this.config\n\n    this.i18n = new I18n(i18n, {\n      // Read the fallback if necessary rather than have it set in the defaults\n      locale: closestAttributeValue(this.$root, 'lang')\n    })\n\n    const $label = this.findLabel()\n    // Add an ID to the label if it doesn't have one already\n    // so it can be referenced by `aria-labelledby`\n    if (!$label.id) {\n      $label.id = `${this.id}-label`\n    }\n\n    // We need to copy the 'id' of the root element\n    // to the new button replacement element\n    // so that focus will work in the error summary\n    this.$input.id = `${this.id}-input`\n\n    // Hide the native input\n    this.$input.setAttribute('hidden', '')\n\n    // Locate or create the file drop zone\n    this.$dropZone = this.$root.classList.contains(dropZoneClass)\n      ? this.$root\n      : document.createElement('div')\n\n    if (this.$root !== this.$dropZone) {\n      this.$dropZone.classList.add(dropZoneClass)\n    }\n\n    // Create the file selection button\n    this.$dropButton = document.createElement('button')\n    this.$dropButton.classList.add(dropButtonClass)\n    this.$dropButton.type = 'button'\n    this.$dropButton.id = this.id\n    this.$dropButton.classList.add(`${dropButtonClass}--empty`)\n\n    // Copy `aria-describedby` if present so hints and errors\n    // are associated to the `<button>`\n    const ariaDescribedBy = this.$input.getAttribute('aria-describedby')\n    if (ariaDescribedBy) {\n      this.$dropButton.setAttribute('aria-describedby', ariaDescribedBy)\n    }\n\n    // Create status element that shows what/how many files are selected\n    this.$status = document.createElement('span')\n    this.$status.classList.add('nhsuk-body', statusClass)\n    this.$status.setAttribute('aria-live', 'polite')\n    this.$status.innerText = this.formatStatusMessage(0)\n\n    this.$dropButton.appendChild(this.$status)\n\n    const $statusComma = document.createElement('span')\n    $statusComma.classList.add('nhsuk-u-visually-hidden')\n    $statusComma.innerText = ', '\n    $statusComma.id = `${this.id}-comma`\n\n    this.$dropButton.appendChild($statusComma)\n\n    const $dropButtonGroup = document.createElement('span')\n    $dropButtonGroup.classList.add(dropButtonGroupClass)\n\n    const $chooseFilesButton = document.createElement('span')\n    $chooseFilesButton.classList.add(\n      'nhsuk-button',\n      chooseFilesButtonClass,\n      ...chooseFilesButtonClassList\n    )\n    $chooseFilesButton.innerText = this.i18n.t('chooseFilesButton')\n\n    $dropButtonGroup.appendChild($chooseFilesButton)\n\n    // Add a space so the button and instruction read correctly\n    // when CSS is disabled\n    $dropButtonGroup.append(' ')\n\n    const $dropInstruction = document.createElement('span')\n    $dropInstruction.classList.add('nhsuk-body', dropInstructionClass)\n    $dropInstruction.innerText = this.i18n.t('dropInstruction')\n\n    $dropButtonGroup.appendChild($dropInstruction)\n\n    this.$dropButton.appendChild($dropButtonGroup)\n    this.$dropButton.setAttribute(\n      'aria-labelledby',\n      `${$label.id} ${$statusComma.id} ${this.$dropButton.id}`\n    )\n    this.$dropButton.addEventListener('click', this.onClick.bind(this))\n    this.$dropButton.addEventListener('dragover', (event) => {\n      // prevent default to allow drop\n      event.preventDefault()\n    })\n\n    // For backwards compatibility with GOV.UK Frontend, optionally replace\n    // the native input with the drop zone unless already in the HTML\n    if (!this.$dropZone.parentElement) {\n      this.$input.parentElement?.insertBefore(this.$dropZone, this.$input)\n      this.$dropZone.appendChild(this.$input)\n    }\n\n    // Assemble these all together\n    this.$dropZone.insertAdjacentElement('afterbegin', this.$dropButton)\n\n    this.$input.setAttribute('tabindex', '-1')\n    this.$input.setAttribute('aria-hidden', 'true')\n\n    // Bind change event to the underlying input\n    this.$input.addEventListener('change', this.onChange.bind(this))\n\n    // Synchronise the `disabled` state between the button and underlying input\n    this.updateDisabledState()\n    this.observeDisabledState()\n\n    // Handle drop zone visibility\n    // A live region to announce when users enter or leave the drop zone\n    this.$announcements = document.createElement('span')\n    this.$announcements.classList.add(\n      announcementsClass,\n      'nhsuk-u-visually-hidden'\n    )\n    this.$announcements.setAttribute('aria-live', 'assertive')\n    this.$dropZone.insertAdjacentElement('afterend', this.$announcements)\n\n    // if there is no CSS and input is hidden\n    // button will need to handle drop event\n    this.$dropButton.addEventListener('drop', this.onDrop.bind(this))\n\n    // While user is dragging, it gets a little more complex because of Safari.\n    // Safari doesn't fill `relatedTarget` on `dragleave` (nor `dragenter`).\n    // This means we can't use `relatedTarget` to:\n    // - check if the user is still within the wrapper\n    //   (`relatedTarget` being a descendant of the wrapper)\n    // - check if the user is still over the viewport\n    //   (`relatedTarget` being null if outside)\n\n    // Thanks to `dragenter` bubbling, we can listen on the `document` with a\n    // single function and update the visibility based on whether we entered a\n    // node inside or outside the wrapper.\n    document.addEventListener(\n      'dragenter',\n      this.updateDropzoneVisibility.bind(this)\n    )\n\n    // To detect if we're outside the document, we can track if there was a\n    // `dragenter` event preceding a `dragleave`. If there wasn't, this means\n    // we're outside the document.\n    //\n    // The order of events is guaranteed by the HTML specs:\n    // https://html.spec.whatwg.org/multipage/dnd.html#drag-and-drop-processing-model\n    document.addEventListener('dragenter', () => {\n      this.enteredAnotherElement = true\n    })\n\n    document.addEventListener('dragleave', () => {\n      if (!this.enteredAnotherElement && !this.$dropButton.disabled) {\n        this.hideDraggingState()\n        this.$announcements.innerText = this.i18n.t('leftDropZone')\n      }\n\n      this.enteredAnotherElement = false\n    })\n  }\n\n  /**\n   * Updates the visibility of the dropzone as users enters the various elements on the page\n   *\n   * @param {DragEvent} event - The `dragenter` event\n   */\n  updateDropzoneVisibility(event) {\n    if (this.$dropButton.disabled) {\n      return\n    }\n\n    const { dropButtonClass } = this.config\n\n    // DOM interfaces only type `event.target` as `EventTarget`\n    // so we first need to make sure it's a `Node`\n    if (event.target instanceof Node) {\n      if (this.$dropZone.contains(event.target)) {\n        if (event.dataTransfer && this.canDrop(event.dataTransfer)) {\n          // Only update the class and make the announcement if not already visible\n          // to avoid repeated announcements on NVDA (2024.4) + Firefox (133)\n          if (\n            !this.$dropButton.classList.contains(`${dropButtonClass}--dragging`)\n          ) {\n            this.showDraggingState()\n            this.$announcements.innerText = this.i18n.t('enteredDropZone')\n          }\n        }\n      } else if (\n        this.$dropButton.classList.contains(`${dropButtonClass}--dragging`)\n      ) {\n        // Only hide the dropzone if it is visible to prevent announcing user\n        // left the drop zone when they enter the page but haven't reached yet\n        // the file upload component\n        this.hideDraggingState()\n        this.$announcements.innerText = this.i18n.t('leftDropZone')\n      }\n    }\n  }\n\n  /**\n   * Show the drop zone visually\n   */\n  showDraggingState() {\n    const { dropButtonClass } = this.config\n    this.$dropButton.classList.add(`${dropButtonClass}--dragging`)\n  }\n\n  /**\n   * Hides the drop zone visually\n   */\n  hideDraggingState() {\n    const { dropButtonClass } = this.config\n    this.$dropButton.classList.remove(`${dropButtonClass}--dragging`)\n  }\n\n  /**\n   * Handles user dropping on the component\n   *\n   * @param {DragEvent} event - The `dragenter` event\n   */\n  onDrop(event) {\n    event.preventDefault()\n\n    if (event.dataTransfer && this.canFillInput(event.dataTransfer)) {\n      this.$input.files = event.dataTransfer.files\n\n      // Dispatch a `change` event so external code that would rely on the `<input>`\n      // dispatching an event when files are dropped still work.\n      // Use a `CustomEvent` so our events are distinguishable from browser's native events\n      this.$input.dispatchEvent(new CustomEvent('change'))\n\n      this.hideDraggingState()\n    }\n  }\n\n  /**\n   * Confirms if enhanced `<input>` can be filled with files from the given `DataTransfer`\n   *\n   * @param {DataTransfer} dataTransfer - The `DataTransfer` being dropped\n   * @returns {boolean} Whether the `DataTransfer` contains files, in number matching the `multiple` attribute of the original `<input>`\n   */\n  canFillInput(dataTransfer) {\n    return this.matchesInputCapacity(dataTransfer.files.length)\n  }\n\n  /**\n   * Confirms if the content of a `DataTransfer` dragged over component can be dropped\n   *\n   * Unfortunately, there's a certain level of uncertainty in Safari which does not\n   * even provide a list of `items` while dragging (and seems to even miss the `types` sometimes)\n   *\n   * @param {DataTransfer} dataTransfer - The `DataTransfer` being dragged\n   * @returns {boolean} Whether the `DataTransfer` looks OK for filling the input, false otherwise\n   */\n  canDrop(dataTransfer) {\n    // If the browser is kind enough to give a list of items, we'll use that as source of truth\n    if (dataTransfer.items.length) {\n      return this.matchesInputCapacity(countFileItems(dataTransfer.items))\n    }\n\n    // If we have some type information, we'll use that\n    if (dataTransfer.types.length) {\n      return dataTransfer.types.includes('Files')\n    }\n\n    // If we have nothing to go by, we'll assume things are OK\n    // until we have a more accurate picture inside the `drop` event\n    return true\n  }\n\n  /**\n   * Confirms the given number of files matches that allowed by the enhanced `<input>`\n   *\n   * @param {number} numberOfFiles - The number of files\n   * @returns {boolean} Whether the enhanced `<input>` can accept that number of files\n   */\n  matchesInputCapacity(numberOfFiles) {\n    if (this.$input.multiple) {\n      return numberOfFiles > 0\n    }\n\n    return numberOfFiles === 1\n  }\n\n  /**\n   * Check if the value of the underlying input has changed\n   */\n  onChange() {\n    const { dropButtonClass } = this.config\n    const { files } = this.$input\n\n    if (!files?.length) {\n      // If there are no files, show the default selection text\n      this.$status.innerText = this.formatStatusMessage(0)\n      this.$dropButton.classList.add(`${dropButtonClass}--empty`)\n    } else {\n      if (\n        // If there is 1 file, just show the file name\n        files.length === 1\n      ) {\n        this.$status.innerText = files[0].name\n      } else {\n        // Otherwise, tell the user how many files are selected\n        this.$status.innerText = this.formatStatusMessage(files.length)\n      }\n\n      this.$dropButton.classList.remove(`${dropButtonClass}--empty`)\n    }\n  }\n\n  /**\n   * Formats the message shown to users according to files chosen\n   *\n   * @param {number} fileCount - The number of files chosen\n   * @returns {string} Status message\n   */\n  formatStatusMessage(fileCount) {\n    if (fileCount === 0) {\n      return this.i18n.t('noFileChosen')\n    }\n\n    return this.i18n.t('multipleFilesChosen', { count: fileCount })\n  }\n\n  /**\n   * Looks up the `<label>` element associated to the field\n   *\n   * @returns {HTMLElement} The `<label>` element associated to the field\n   * @throws {ElementError} If the `<label>` cannot be found\n   */\n  findLabel() {\n    // Use `label` in the selector so TypeScript knows the type of `HTMLElement`\n    const $label = document.querySelector(`label[for=\"${this.$input.id}\"]`)\n\n    if (!$label) {\n      throw new ElementError({\n        component: FileUpload,\n        identifier: `Field label (\\`<label for=${this.$input.id}>\\`)`\n      })\n    }\n\n    return $label\n  }\n\n  /**\n   * When the button is clicked, emulate clicking the actual, hidden file input\n   */\n  onClick() {\n    this.$input.click()\n  }\n\n  /**\n   * Create a mutation observer to check if the input's attributes altered.\n   */\n  observeDisabledState() {\n    const observer = new MutationObserver((mutationList) => {\n      for (const mutation of mutationList) {\n        if (\n          mutation.type === 'attributes' &&\n          mutation.attributeName === 'disabled'\n        ) {\n          this.updateDisabledState()\n        }\n      }\n    })\n\n    observer.observe(this.$input, {\n      attributes: true\n    })\n  }\n\n  /**\n   * Synchronise the `disabled` state between the input and replacement button.\n   */\n  updateDisabledState() {\n    const { dropZoneClass } = this.config\n\n    const disabledStateClass = this.$root.classList.contains(dropZoneClass)\n      ? `${dropZoneClass}--disabled`\n      : `${FileUpload.moduleName}--disabled`\n\n    this.$dropButton.disabled = this.$input.disabled\n    this.$root.classList.toggle(disabledStateClass, this.$dropButton.disabled)\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'nhsuk-file-upload'\n\n  /**\n   * File upload default config\n   *\n   * @see {@link FileUploadConfig}\n   * @constant\n   * @type {FileUploadConfig}\n   */\n  static defaults = Object.freeze({\n    dropZoneClass: 'nhsuk-file-upload__drop-zone',\n    dropButtonClass: 'nhsuk-file-upload__drop-button',\n    dropButtonGroupClass: 'nhsuk-file-upload__drop-button-group',\n    dropInstructionClass: 'nhsuk-file-upload__drop-instruction',\n    chooseFilesButtonClass: 'nhsuk-file-upload__choose-files-button',\n    chooseFilesButtonClassList: ['nhsuk-button--secondary'],\n    announcementsClass: 'nhsuk-file-upload__announcements',\n    statusClass: 'nhsuk-file-upload__status',\n    i18n: {\n      chooseFilesButton: 'Choose file',\n      dropInstruction: 'or drop file',\n      noFileChosen: 'No file chosen',\n      multipleFilesChosen: {\n        // the 'one' string isn't used as the component displays the filename\n        // instead, however it's here for coverage's sake\n        one: '%{count} file chosen',\n        other: '%{count} files chosen'\n      },\n      enteredDropZone: 'Entered drop zone',\n      leftDropZone: 'Left drop zone'\n    }\n  })\n\n  /**\n   * File upload config schema\n   *\n   * @constant\n   * @satisfies {Schema<FileUploadConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      dropZoneClass: { type: 'string' },\n      dropButtonClass: { type: 'string' },\n      dropButtonGroupClass: { type: 'string' },\n      dropInstructionClass: { type: 'string' },\n      chooseFilesButtonClass: { type: 'string' },\n      chooseFilesButtonClassList: { type: 'array' },\n      announcementsClass: { type: 'string' },\n      statusClass: { type: 'string' },\n      i18n: { type: 'object' }\n    }\n  })\n}\n\n/**\n * Counts the number of `DataTransferItem` whose kind is `file`\n *\n * @param {DataTransferItemList} list - The list\n * @returns {number} The number of items whose kind is `file` in the list\n */\nfunction countFileItems(list) {\n  let result = 0\n\n  // `DataTransferItemList` is not iterable\n  // eslint-disable-next-line @typescript-eslint/prefer-for-of\n  for (let i = 0; i < list.length; i++) {\n    if (list[i].kind === 'file') {\n      result++\n    }\n  }\n  return result\n}\n\n/**\n * Initialise file upload component\n *\n * @deprecated Use {@link createAll | `createAll(FileUpload, options)`} instead.\n * @param {InitOptions & Partial<FileUploadConfig>} [options]\n */\nexport function initFileUploads(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $fileUploads = $scope?.querySelectorAll(\n    `[data-module=\"${FileUpload.moduleName}\"]`\n  )\n\n  $fileUploads?.forEach(($root) => {\n    new FileUpload($root, options)\n  })\n}\n\n/**\n * File upload config\n *\n * @see {@link FileUpload.defaults}\n * @typedef {object} FileUploadConfig\n * @property {string} dropZoneClass - Drop zone class\n * @property {string} dropButtonClass - Drop button class\n * @property {string} dropButtonGroupClass - Drop button group class\n * @property {string} dropInstructionClass - Drop instruction class\n * @property {string} chooseFilesButtonClass - Choose files button class\n * @property {string[]} chooseFilesButtonClassList - Choose files button modifier classes\n * @property {string} announcementsClass - Announcements class\n * @property {string} statusClass - Status class\n * @property {FileUploadTranslations} [i18n=FileUpload.defaults.i18n] - File upload translations\n */\n\n/**\n * File upload translations\n *\n * @see {@link FileUpload.defaults.i18n}\n * @typedef {object} FileUploadTranslations\n *\n * Messages used by the component\n * @property {string} [chooseFilesButton] - The text of the button that opens the file picker\n * @property {string} [dropInstruction] - The text informing users they can drop files\n * @property {TranslationPluralForms} [multipleFilesChosen] - The text displayed when multiple files\n *   have been chosen by the user\n * @property {string} [noFileChosen] - The text to displayed when no file has been chosen by the user\n * @property {string} [enteredDropZone] - The text announced by assistive technology\n *   when user drags files and enters the drop zone\n * @property {string} [leftDropZone] - The text announced by assistive technology\n *   when user drags files and leaves the drop zone without dropping\n */\n\n/**\n * @import { Schema } from '../../common/configuration/index.mjs'\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { TranslationPluralForms } from '../../i18n.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\n\n/**\n * Header component\n *\n * @augments {ConfigurableComponent<HeaderConfig>}\n */\nexport class Header extends ConfigurableComponent {\n  /** @type {HTMLElement | null} */\n  $navigation = null\n\n  /** @type {HTMLElement | null} */\n  $navigationList = null\n\n  /** @type {NodeListOf<HTMLElement> | null} */\n  $navigationItems = null\n\n  /** @type {HTMLElement | null} */\n  $menu = null\n\n  /** @type {HTMLButtonElement | null} */\n  $menuToggle = null\n\n  /** @type {HTMLElement | null} */\n  $menuList = null\n\n  width = 0\n\n  /**\n   * @type {{ element: HTMLElement, right: number }[]}\n   */\n  breakpoints = []\n\n  /**\n   * @type {number | null}\n   */\n  updateNavigationTimer = null\n\n  menuIsEnabled = false\n  menuIsOpen = false\n\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<HeaderConfig>} [config] - Header config\n   */\n  constructor($root, config) {\n    super($root, config)\n\n    const {\n      navigationClass,\n      navigationListClass,\n      navigationItemClass,\n      menuClass,\n      menuToggleClass\n    } = this.config\n\n    const $navigation = this.$root.querySelector(`.${navigationClass}`)\n    const $navigationList = this.$root.querySelector(`.${navigationListClass}`)\n\n    const $navigationItems = /** @type {NodeListOf<HTMLElement>} */ (\n      this.$root.querySelectorAll(`.${navigationItemClass}`)\n    )\n\n    const $menu = this.$root.querySelector(`.${menuClass}`)\n    const $menuToggle = this.$root.querySelector(`.${menuToggleClass}`)\n\n    // Check for navigation (optional)\n    if ($navigation) {\n      if (!($navigation instanceof HTMLElement)) {\n        throw new ElementError({\n          component: Header,\n          identifier: `Navigation (\\`<nav class=\"${navigationClass}\">\\`)`\n        })\n      }\n\n      if (!$navigationList || !($navigationList instanceof HTMLElement)) {\n        throw new ElementError({\n          component: Header,\n          identifier: `List (\\`<ul class=\"${navigationListClass}\">\\`)`\n        })\n      }\n\n      if (!$navigationItems.length) {\n        throw new ElementError({\n          component: Header,\n          identifier: `List items (\\`<li class=\"${navigationItemClass}\">\\`)`\n        })\n      }\n\n      if (!$menu || !($menu instanceof HTMLElement)) {\n        throw new ElementError({\n          component: Header,\n          identifier: `Menu item (\\`<li class=\"${menuClass}\" hidden>\\`)`\n        })\n      }\n\n      if (!$menuToggle || !($menuToggle instanceof HTMLButtonElement)) {\n        throw new ElementError({\n          component: Header,\n          identifier: `Menu button (\\`<button class=\"${menuToggleClass}\">\\`)`,\n          expectedType: 'HTMLButtonElement'\n        })\n      }\n\n      this.$navigation = $navigation\n      this.$navigationList = $navigationList\n      this.$navigationItems = $navigationItems\n      this.$menu = $menu\n      this.$menuToggle = $menuToggle\n      this.$menuList = document.createElement('ul')\n    }\n\n    // Save bound functions so we can remove event listeners when unnecessary\n    this.handleEscapeKey = this.onEscapeKey.bind(this)\n    this.handleUpdateNavigation = this.updateNavigation.bind(this)\n    this.handleToggleMenu = this.toggleMenu.bind(this)\n\n    this.setupNavigation()\n    this.updateNavigation()\n  }\n\n  /**\n   * Reset navigation\n   *\n   * Calculate available space by summing the width of each navigation item\n   */\n  resetNavigation() {\n    const { $menu, $navigationList } = this\n    if (!$menu || !$navigationList) {\n      return\n    }\n\n    let right = 0\n\n    // Reset and calculate widths on every resize\n    this.breakpoints.forEach((breakpoint) => {\n      $navigationList.insertBefore(breakpoint.element, $menu)\n\n      // Calculate widths\n      right += breakpoint.element.offsetWidth\n      breakpoint.right = right\n    })\n\n    // Reset space for menu button\n    this.width = $navigationList.offsetWidth\n  }\n\n  /**\n   * Add the breakpoints with default positions\n   */\n  setupNavigation() {\n    const { $navigationItems } = this\n\n    // Skip with no navigation items\n    if (!$navigationItems) {\n      return\n    }\n\n    $navigationItems.forEach((element) => {\n      this.breakpoints.push({ element, right: 0 })\n    })\n\n    // Add resize listener for next update\n    window.addEventListener('resize', () => {\n      if (this.updateNavigationTimer) {\n        window.clearTimeout(this.updateNavigationTimer)\n      }\n\n      this.updateNavigationTimer = window.setTimeout(\n        this.handleUpdateNavigation,\n        100\n      )\n    })\n  }\n\n  /**\n   * Add the menu to the DOM\n   */\n  setupMenu() {\n    const { $menu, $menuList } = this\n    const { menuListClass } = this.config\n\n    // Skip with no menu or when already appended\n    if (!$menu || !$menuList || $menuList.parentElement) {\n      return\n    }\n\n    $menuList.classList.add(menuListClass)\n    $menuList.setAttribute('hidden', '')\n    $menu.appendChild($menuList)\n  }\n\n  /**\n   * Enable the menu\n   */\n  enableMenu() {\n    const { $menu, $menuToggle } = this\n\n    // Skip with no menu or when already enabled\n    if (!$menu || !$menuToggle || this.menuIsEnabled) {\n      return\n    }\n\n    this.menuIsEnabled = true\n    $menu.removeAttribute('hidden')\n\n    // Add click listener to toggle menu\n    $menuToggle.addEventListener('click', this.handleToggleMenu)\n  }\n\n  /**\n   * Disable the menu\n   */\n  disableMenu() {\n    const { $menu, $menuToggle } = this\n\n    // Skip with no menu or when already disabled\n    if (!$menu || !$menuToggle || !this.menuIsEnabled) {\n      return\n    }\n\n    this.closeMenu()\n    this.menuIsEnabled = false\n    $menu.setAttribute('hidden', '')\n\n    // Remove click listener from toggle menu\n    $menuToggle.removeEventListener('click', this.handleToggleMenu)\n  }\n\n  /**\n   * Close the menu\n   *\n   * Closes the menu and updates accessibility state.\n   *\n   * Removes the bottom border from the navigation\n   */\n  closeMenu() {\n    const { $menuList, $menuToggle, $navigation } = this\n\n    // Skip with no menu or when already closed\n    if (\n      !$navigation ||\n      !$menuList ||\n      !$menuToggle ||\n      !this.menuIsEnabled ||\n      !this.menuIsOpen\n    ) {\n      return\n    }\n\n    this.menuIsOpen = false\n    $menuList.setAttribute('hidden', '')\n    $menuToggle.setAttribute('aria-expanded', 'false')\n    $navigation.style.removeProperty('border-bottom-width')\n\n    // Remove escape key listener to close menu\n    document.removeEventListener('keydown', this.handleEscapeKey)\n  }\n\n  /**\n   * Escape key handler\n   *\n   * This function is called when the user\n   * presses the escape key to close the menu.\n   *\n   * @param {KeyboardEvent} event - Key press event\n   */\n  onEscapeKey(event) {\n    if (event.key === 'Escape') {\n      this.closeMenu()\n    }\n  }\n\n  /**\n   * Open the menu\n   *\n   * Opens the menu and updates accessibility state.\n   *\n   * The menu is absolutely positioned, so it adds a border\n   * to the bottom of the navigation to prevent it from overlapping\n   *\n   * Adds event listeners for the close button,\n   */\n  openMenu() {\n    const { $menuList, $menuToggle, $navigation } = this\n\n    // Skip with no menu or when already open\n    if (\n      !$navigation ||\n      !$menuList ||\n      !$menuToggle ||\n      !this.menuIsEnabled ||\n      this.menuIsOpen\n    ) {\n      return\n    }\n\n    this.menuIsOpen = true\n    $menuList.removeAttribute('hidden')\n    $menuToggle.setAttribute('aria-expanded', 'true')\n    $navigation.style.setProperty(\n      'border-bottom-width',\n      `${$menuList.offsetHeight}px`\n    )\n\n    // Add escape key listener to close menu\n    document.addEventListener('keydown', this.handleEscapeKey)\n  }\n\n  /**\n   * Handle menu button click\n   *\n   * Toggles the menu between open and closed\n   */\n  toggleMenu() {\n    if (!this.menuIsEnabled) {\n      return\n    }\n\n    if (this.menuIsOpen) {\n      this.closeMenu()\n    } else {\n      this.openMenu()\n    }\n  }\n\n  /**\n   * Update navigation for the available space\n   *\n   * Moves all items that overflow the available space into the menu\n   */\n  updateNavigation() {\n    this.resetNavigation()\n\n    // Check for items that overflow\n    let menuItems = this.breakpoints.filter((breakpoint) => {\n      return breakpoint.right > this.width\n    })\n\n    // Disable menu if empty\n    if (!menuItems.length) {\n      this.disableMenu()\n      return\n    }\n\n    this.setupMenu()\n    this.enableMenu()\n\n    const { $menu, $menuList, $navigation } = this\n\n    // Skip when no menu or menu list\n    if (!$menu || !$menuList || !$navigation) {\n      return\n    }\n\n    // Subtract space for menu button\n    this.width -= $menu.offsetWidth\n\n    // Move items based on available width\n    this.breakpoints.forEach((breakpoint) => {\n      if (breakpoint.right > this.width) {\n        $menuList.insertAdjacentElement('beforeend', breakpoint.element)\n      }\n    })\n\n    // Update menu height if open\n    if (this.menuIsOpen) {\n      $navigation.style.setProperty(\n        'border-bottom-width',\n        `${$menuList.offsetHeight}px`\n      )\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-header'\n\n  /**\n   * Tabs default config\n   *\n   * @see {@link HeaderConfig}\n   * @constant\n   * @type {HeaderConfig}\n   */\n  static defaults = Object.freeze({\n    navigationClass: 'nhsuk-header__navigation',\n    navigationListClass: 'nhsuk-header__navigation-list',\n    navigationItemClass: 'nhsuk-header__navigation-item',\n    menuClass: 'nhsuk-header__menu',\n    menuToggleClass: 'nhsuk-header__menu-toggle',\n    menuListClass: 'nhsuk-header__menu-list'\n  })\n\n  /**\n   * Tabs config schema\n   *\n   * @constant\n   * @satisfies {Schema<HeaderConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      navigationClass: { type: 'string' },\n      navigationListClass: { type: 'string' },\n      navigationItemClass: { type: 'string' },\n      menuClass: { type: 'string' },\n      menuToggleClass: { type: 'string' },\n      menuListClass: { type: 'string' }\n    }\n  })\n}\n\n/**\n * Initialise header component\n *\n * @deprecated Use {@link createAll | `createAll(Header, options)`} instead.\n * @param {InitOptions & Partial<HeaderConfig>} [options]\n */\nexport function initHeader(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $root = $scope?.querySelector(`[data-module=\"${Header.moduleName}\"]`)\n\n  if (!$root) {\n    return\n  }\n\n  new Header($root, options)\n}\n\n/**\n * Header config\n *\n * @typedef {object} HeaderConfig\n * @property {string} navigationClass - Navigation class\n * @property {string} navigationListClass - Navigation list class\n * @property {string} navigationItemClass - Navigation item class\n * @property {string} menuClass - Menu class\n * @property {string} menuToggleClass - Menu toggle button class\n * @property {string} menuListClass - Menu list class\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { setFocus } from '../../common/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\n\n/**\n * Notification banner component\n *\n * Adapted from https://github.com/alphagov/govuk-frontend/blob/v5.10.2/packages/govuk-frontend/src/govuk/components/notification-banner/notification-banner.mjs\n *\n * @augments {ConfigurableComponent<NotificationBannerConfig>}\n */\nexport class NotificationBanner extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<NotificationBannerConfig>} [config] - Notification banner config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    /**\n     * Focus the notification banner\n     *\n     * If `role=\"alert\"` is set, focus the element to help some assistive\n     * technologies prioritise announcing it.\n     *\n     * You can turn off the auto-focus functionality by setting\n     * `data-disable-auto-focus=\"true\"` in the component HTML. You might wish to\n     * do this based on user research findings, or to avoid a clash with another\n     * element which should be focused when the page loads.\n     */\n    if (\n      this.$root.getAttribute('role') === 'alert' &&\n      !this.config.disableAutoFocus\n    ) {\n      setFocus(this.$root)\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'nhsuk-notification-banner'\n\n  /**\n   * Notification banner default config\n   *\n   * @see {@link NotificationBannerConfig}\n   * @constant\n   * @type {NotificationBannerConfig}\n   */\n  static defaults = Object.freeze({\n    disableAutoFocus: false\n  })\n\n  /**\n   * Notification banner config schema\n   *\n   * @constant\n   * @satisfies {Schema<NotificationBannerConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      disableAutoFocus: { type: 'boolean' }\n    }\n  })\n}\n\n/**\n * Initialise notification banner component\n *\n * @deprecated Use {@link createAll | `createAll(NotificationBanner, options)`} instead.\n * @param {InitOptions & Partial<NotificationBannerConfig>} [options]\n */\nexport function initNotificationBanners(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $notificationBanners = $scope?.querySelectorAll(\n    `[data-module=\"${NotificationBanner.moduleName}\"]`\n  )\n\n  $notificationBanners?.forEach(($notificationBanner) => {\n    new NotificationBanner($notificationBanner, options)\n  })\n}\n\n/**\n * Notification banner config\n *\n * @typedef {object} NotificationBannerConfig\n * @property {boolean} [disableAutoFocus=false] - If set to `true` the\n *   notification banner will not be focussed when the page loads. This only\n *   applies if the component has a `role` of `alert` â€“ in other cases the\n *   component will not be focused on page load, regardless of this option.\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { closestAttributeValue } from '../../common/closest-attribute-value.mjs'\nimport { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\nimport { I18n } from '../../i18n.mjs'\n\n/**\n * Password input component\n *\n * @augments {ConfigurableComponent<PasswordInputConfig>}\n */\nexport class PasswordInput extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<PasswordInputConfig>} [config] - Password input config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $input = this.$root.querySelector('.nhsuk-js-password-input-input')\n    if (!($input instanceof HTMLInputElement)) {\n      throw new ElementError({\n        component: PasswordInput,\n        element: $input,\n        expectedType: 'HTMLInputElement',\n        identifier: 'Form field (`.nhsuk-js-password-input-input`)'\n      })\n    }\n\n    if ($input.type !== 'password') {\n      throw new ElementError({\n        component: PasswordInput,\n        element: $input,\n        expectedType: 'HTMLInputElement with attribute (`type=\"password\"`)',\n        identifier: 'Form field (`.nhsuk-js-password-input-input`)'\n      })\n    }\n\n    const $showHideButton = this.$root.querySelector(\n      '.nhsuk-js-password-input-toggle'\n    )\n    if (!($showHideButton instanceof HTMLButtonElement)) {\n      throw new ElementError({\n        component: PasswordInput,\n        element: $showHideButton,\n        expectedType: 'HTMLButtonElement',\n        identifier: 'Button (`.nhsuk-js-password-input-toggle`)'\n      })\n    }\n\n    if ($showHideButton.type !== 'button') {\n      throw new ElementError({\n        component: PasswordInput,\n        element: $showHideButton,\n        expectedType: 'HTMLButtonElement with type=\"button\"',\n        identifier: 'Button (`.nhsuk-js-password-input-toggle`)'\n      })\n    }\n\n    this.$input = $input\n    this.$showHideButton = $showHideButton\n\n    const { i18n, screenReaderStatusMessageClass } = this.config\n\n    this.i18n = new I18n(i18n, {\n      // Read the fallback if necessary rather than have it set in the defaults\n      locale: closestAttributeValue(this.$root, 'lang')\n    })\n\n    // Show the toggle button element\n    this.$showHideButton.removeAttribute('hidden')\n\n    // Create and append the status text for screen readers.\n    // This is injected between the input and button so that users get a sensible reading order if\n    // moving through the page content linearly:\n    // [password input] -> [your password is visible/hidden] -> [show/hide password]\n    this.$screenReaderStatusMessage = document.createElement('div')\n    this.$screenReaderStatusMessage.setAttribute('aria-live', 'polite')\n    this.$screenReaderStatusMessage.classList.add(\n      screenReaderStatusMessageClass,\n      'nhsuk-u-visually-hidden'\n    )\n\n    this.$input.insertAdjacentElement(\n      'afterend',\n      this.$screenReaderStatusMessage\n    )\n\n    // Bind toggle button\n    this.$showHideButton.addEventListener('click', this.toggle.bind(this))\n\n    // Bind event to revert the password visibility to hidden\n    if (this.$input.form) {\n      this.$input.form.addEventListener('submit', () => this.hide())\n    }\n\n    // If the page is restored from bfcache and the password is visible, hide it again\n    window.addEventListener('pageshow', (event) => {\n      if (event.persisted && this.$input.type !== 'password') {\n        this.hide()\n      }\n    })\n\n    // Default the component to having the password hidden.\n    this.hide()\n  }\n\n  /**\n   * Toggle the visibility of the password input\n   *\n   * @param {MouseEvent} event - Click event\n   */\n  toggle(event) {\n    event.preventDefault()\n\n    // If on this click, the field is type=\"password\", show the value\n    if (this.$input.type === 'password') {\n      this.show()\n      return\n    }\n\n    // Otherwise, hide it\n    // Being defensive - hiding should always be the default\n    this.hide()\n  }\n\n  /**\n   * Show the password input value in plain text\n   */\n  show() {\n    this.setType('text')\n  }\n\n  /**\n   * Hide the password input value\n   */\n  hide() {\n    this.setType('password')\n  }\n\n  /**\n   * Set the password input type\n   *\n   * @param {'text' | 'password'} type - Input type\n   */\n  setType(type) {\n    if (type === this.$input.type) {\n      return\n    }\n\n    // Update input type\n    this.$input.setAttribute('type', type)\n\n    const isHidden = type === 'password'\n    const prefixButton = isHidden ? 'show' : 'hide'\n    const prefixStatus = isHidden ? 'passwordHidden' : 'passwordShown'\n\n    // Update button text\n    this.$showHideButton.innerText = this.i18n.t(`${prefixButton}Password`)\n\n    // Update button aria-label\n    this.$showHideButton.setAttribute(\n      'aria-label',\n      this.i18n.t(`${prefixButton}PasswordAriaLabel`)\n    )\n\n    // Update status change text\n    this.$screenReaderStatusMessage.innerText = this.i18n.t(\n      `${prefixStatus}Announcement`\n    )\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-password-input'\n\n  /**\n   * Password input default config\n   *\n   * @see {@link PasswordInputConfig}\n   * @constant\n   * @type {PasswordInputConfig}\n   */\n  static defaults = Object.freeze({\n    screenReaderStatusMessageClass: 'nhsuk-password-input__sr-status',\n    i18n: {\n      showPassword: 'Show',\n      hidePassword: 'Hide',\n      showPasswordAriaLabel: 'Show password',\n      hidePasswordAriaLabel: 'Hide password',\n      passwordShownAnnouncement: 'Your password is visible',\n      passwordHiddenAnnouncement: 'Your password is hidden'\n    }\n  })\n\n  /**\n   * Password input config schema\n   *\n   * @constant\n   * @satisfies {Schema<PasswordInputConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      screenReaderStatusMessageClass: { type: 'string' },\n      i18n: { type: 'object' }\n    }\n  })\n}\n\n/**\n * Initialise password input component\n *\n * @deprecated Use {@link createAll | `createAll(PasswordInput, options)`} instead.\n * @param {InitOptions & Partial<PasswordInputConfig>} [options]\n */\nexport function initPasswordInputs(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $passwordInputs = $scope?.querySelectorAll(\n    `[data-module=\"${PasswordInput.moduleName}\"]`\n  )\n\n  $passwordInputs?.forEach(($root) => {\n    new PasswordInput($root, options)\n  })\n}\n\n/**\n * Password input config\n *\n * @typedef {object} PasswordInputConfig\n * @property {string} screenReaderStatusMessageClass - Screen reader status message class\n * @property {PasswordInputTranslations} [i18n=PasswordInput.defaults.i18n] - Password input translations\n */\n\n/**\n * Password input translations\n *\n * @see {@link PasswordInput.defaults.i18n}\n * @typedef {object} PasswordInputTranslations\n *\n * Messages displayed to the user indicating the state of the show/hide toggle.\n * @property {string} [showPassword] - Visible text of the button when the\n *   password is currently hidden. Plain text only.\n * @property {string} [hidePassword] - Visible text of the button when the\n *   password is currently visible. Plain text only.\n * @property {string} [showPasswordAriaLabel] - aria-label of the button when\n *   the password is currently hidden. Plain text only.\n * @property {string} [hidePasswordAriaLabel] - aria-label of the button when\n *   the password is currently visible. Plain text only.\n * @property {string} [passwordShownAnnouncement] - Screen reader\n *   announcement to make when the password has just become visible.\n *   Plain text only.\n * @property {string} [passwordHiddenAnnouncement] - Screen reader\n *   announcement to make when the password has just been hidden.\n *   Plain text only.\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { toggleConditionalInput } from '../../common/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\n\n/**\n * Radios component\n *\n * Test at {@link http://localhost:3000/nhsuk-frontend/components/radios/with-conditional-content/}\n *\n * @augments {ConfigurableComponent<RadiosConfig>}\n */\nexport class Radios extends ConfigurableComponent {\n  /**\n   * Radios can be associated with a 'conditionally revealed' content block â€“\n   * for example, a radio for 'Phone' could reveal an additional form field for\n   * the user to enter their phone number.\n   *\n   * These associations are made using a `data-aria-controls` attribute, which\n   * is promoted to an aria-controls attribute during initialisation.\n   *\n   * We also need to restore the state of any conditional reveals on the page\n   * (for example if the user has navigated back), and set up event handlers to\n   * keep the reveal in sync with the radio state.\n   *\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<RadiosConfig>} [config] - Radios config\n   */\n  constructor($root, config) {\n    super($root, config)\n\n    const $inputs = this.$root.querySelectorAll('input[type=\"radio\"]')\n    if (!$inputs.length) {\n      throw new ElementError({\n        component: Radios,\n        identifier: 'Form inputs (`<input type=\"radio\">`)'\n      })\n    }\n\n    this.$inputs = $inputs\n\n    this.$inputs.forEach(($input) => {\n      const targetId =\n        $input.dataset.ariaControls ?? $input.getAttribute('aria-controls')\n\n      // Skip radios without data-aria-controls attributes\n      if (!targetId) {\n        return\n      }\n\n      // Throw if target conditional element does not exist.\n      if (!document.getElementById(targetId)) {\n        throw new ElementError({\n          component: Radios,\n          identifier: `Conditional reveal (\\`id=\"${targetId}\"\\`)`\n        })\n      }\n\n      // Promote the data-aria-controls attribute to an aria-controls attribute\n      // so that the relationship is exposed in the AOM\n      if (!$input.hasAttribute('aria-controls')) {\n        $input.setAttribute('aria-controls', targetId)\n        delete $input.dataset.ariaControls\n      }\n    })\n\n    // When the page is restored after navigating 'back' in some browsers the\n    // state of form controls is not restored until *after* the DOMContentLoaded\n    // event is fired, so we need to sync after the pageshow event.\n    window.addEventListener('pageshow', () => this.syncAllConditionalReveals())\n\n    // Although we've set up handlers to sync state on the pageshow event, init\n    // could be called after those events have fired, for example if they are\n    // added to the page dynamically, so sync now too.\n    this.syncAllConditionalReveals()\n\n    // Handle events\n    this.$root.addEventListener('click', (event) => this.handleClick(event))\n  }\n\n  /**\n   * Sync the conditional reveal states for all radio buttons in this component.\n   */\n  syncAllConditionalReveals() {\n    this.$inputs.forEach(($input) =>\n      this.syncConditionalRevealWithInputState($input)\n    )\n  }\n\n  /**\n   * Sync conditional reveal with the input state\n   *\n   * Synchronise the visibility of the conditional reveal, and its accessible\n   * state, with the input's checked state.\n   *\n   * @param {HTMLInputElement} $input - Radio input\n   */\n  syncConditionalRevealWithInputState($input) {\n    const { conditionalClass } = this.config\n    toggleConditionalInput($input, `${conditionalClass}--hidden`)\n  }\n\n  /**\n   * Toggle classes and attributes\n   *\n   * @param {MouseEvent} event - Click event\n   */\n  handleClick(event) {\n    const $clickedInput = event.target\n\n    // Ignore clicks on things that aren't radio buttons\n    if (\n      !($clickedInput instanceof HTMLInputElement) ||\n      $clickedInput.type !== 'radio'\n    ) {\n      return\n    }\n\n    // We only need to consider radios with conditional reveals, which will have\n    // aria-controls attributes.\n    const $allInputs = document.querySelectorAll(\n      'input[type=\"radio\"][aria-controls]'\n    )\n\n    const $clickedInputForm = $clickedInput.form\n    const $clickedInputName = $clickedInput.name\n\n    $allInputs.forEach(($input) => {\n      const hasSameFormOwner = $input.form === $clickedInputForm\n      const hasSameName = $input.name === $clickedInputName\n\n      if (hasSameName && hasSameFormOwner) {\n        this.syncConditionalRevealWithInputState($input)\n      }\n    })\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-radios'\n\n  /**\n   * Radios default config\n   *\n   * @see {@link RadiosConfig}\n   * @constant\n   * @type {RadiosConfig}\n   */\n  static defaults = Object.freeze({\n    conditionalClass: 'nhsuk-radios__conditional'\n  })\n\n  /**\n   * Radios config schema\n   *\n   * @constant\n   * @satisfies {Schema<RadiosConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      conditionalClass: { type: 'string' }\n    }\n  })\n}\n\n/**\n * Initialise radios component\n *\n * @deprecated Use {@link createAll | `createAll(Radios, options)`} instead.\n * @param {InitOptions & Partial<RadiosConfig>} [options]\n */\nexport function initRadios(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $radios = $scope?.querySelectorAll(\n    `[data-module=\"${Radios.moduleName}\"]`\n  )\n\n  $radios?.forEach(($root) => {\n    new Radios($root, options)\n  })\n}\n\n/**\n * Radios config\n *\n * @typedef {object} RadiosConfig\n * @property {string} conditionalClass - Conditionally revealed content class\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { setFocus } from '../../common/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\n\nconst _self =\n  typeof globalThis !== 'undefined'\n    ? globalThis // Modern browsers, Node.js\n    : self // Old browsers, web workers\n\n/**\n * Skip link component\n *\n * When using VoiceOver on iOS, focus remains on the skip link anchor\n * when selected so the next focusable element is not at the jumped to area.\n *\n * @augments {ConfigurableComponent<SkipLinkConfig, HTMLAnchorElement>}\n */\nexport class SkipLink extends ConfigurableComponent {\n  static elementType = _self.HTMLAnchorElement\n\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<SkipLinkConfig>} [config] - Skip link config\n   */\n  constructor($root, config) {\n    super($root, config)\n\n    const hash = this.$root.hash\n    const href = this.$root.getAttribute('href') ?? ''\n\n    // Return early for external URLs or links to other pages\n    if (\n      this.$root.origin !== window.location.origin ||\n      this.$root.pathname !== window.location.pathname\n    ) {\n      return\n    }\n\n    const linkedElementId = hash.replace('#', '')\n\n    // Check link path matching current page\n    if (!linkedElementId) {\n      throw new ElementError({\n        component: SkipLink,\n        identifier: `Target link (\\`href=\"${href}\"\\`) hash fragment`\n      })\n    }\n\n    const $linkedElement = document.getElementById(linkedElementId)\n\n    // Check for linked element\n    if (!$linkedElement) {\n      throw new ElementError({\n        component: SkipLink,\n        element: $linkedElement,\n        identifier: `Target content (\\`id=\"${linkedElementId}\"\\`)`\n      })\n    }\n\n    /**\n     * Focus the linked element on click\n     *\n     * Adds a helper CSS class to hide native focus styles,\n     * but removes it on blur to restore native focus styles\n     */\n    this.$root.addEventListener('click', () => {\n      const { focusedElementClassList } = this.config\n\n      setFocus($linkedElement, {\n        onBeforeFocus() {\n          $linkedElement.classList.add(...focusedElementClassList)\n        },\n        onBlur() {\n          $linkedElement.classList.remove(...focusedElementClassList)\n        }\n      })\n    })\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-skip-link'\n\n  /**\n   * Skip link default config\n   *\n   * @see {@link SkipLinkConfig}\n   * @constant\n   * @type {SkipLinkConfig}\n   */\n  static defaults = Object.freeze({\n    focusedElementClassList: ['nhsuk-skip-link-focused-element']\n  })\n\n  /**\n   * Skip link config schema\n   *\n   * @constant\n   * @satisfies {Schema<SkipLinkConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      focusedElementClassList: { type: 'array' }\n    }\n  })\n}\n\n/**\n * Initialise skip link component\n *\n * @deprecated Use {@link createAll | `createAll(SkipLink, options)`} instead.\n * @param {InitOptions & Partial<SkipLinkConfig>} [options]\n */\nexport function initSkipLinks(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $skipLinks = $scope?.querySelectorAll(\n    `[data-module=\"${SkipLink.moduleName}\"]`\n  )\n\n  $skipLinks?.forEach(($root) => {\n    new SkipLink($root, options)\n  })\n}\n\n/**\n * Skip link config\n *\n * @typedef {object} SkipLinkConfig\n * @property {string[]} focusedElementClassList - Focused element class list\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\n\n/**\n * Table component\n *\n * @augments {ConfigurableComponent<TableConfig>}\n */\nexport class Table extends ConfigurableComponent {\n  $upArrow = `\n    <svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M5.4 8.3L10.4 3.3C10.6 3.1 10.8 3.00001 11.1 3.00001C11.4 3.00001 11.6 3.1 11.8 3.3L16.8 8.3C16.9444 8.49258 17.0145 8.73078 16.9975 8.97089C16.9804 9.211 16.8773 9.4369 16.7071 9.60711C16.5369 9.77732 16.311 9.88042 16.0709 9.89749C15.8308 9.91455 15.5926 9.84443 15.4 9.7L12.1 6.4L12.1 18C12.1 18.2652 11.9946 18.5196 11.8071 18.7071C11.6196 18.8946 11.3652 19 11.1 19C10.8348 19 10.5804 18.8946 10.3929 18.7071C10.2054 18.5196 10.1 18.2652 10.1 18L10.1 6.4L6.8 9.7C6.71404 9.81462 6.60445 9.90943 6.47866 9.97801C6.35286 10.0466 6.2138 10.0873 6.07089 10.0975C5.92798 10.1076 5.78455 10.087 5.65033 10.0369C5.5161 9.98677 5.3942 9.90842 5.29289 9.80711C5.19159 9.7058 5.11323 9.58391 5.06313 9.44968C5.01303 9.31545 4.99236 9.17203 5.00252 9.02911C5.01267 8.8862 5.05342 8.74714 5.122 8.62135C5.19058 8.49556 5.28538 8.38597 5.4 8.3Z\" fill=\"currentColor\"/>\n    </svg>\n  `\n\n  $downArrow = `\n    <svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M16.6 13.7L11.6 18.7C11.4 18.9 11.2 19 10.9 19C10.6 19 10.4 18.9 10.2 18.7L5.2 13.7C5.05557 13.5074 4.98545 13.2692 5.00252 13.0291C5.01958 12.789 5.12268 12.5631 5.29289 12.3929C5.4631 12.2227 5.689 12.1196 5.92911 12.1025C6.16922 12.0854 6.40743 12.1556 6.6 12.3L9.9 15.6V4C9.9 3.73478 10.0054 3.48043 10.1929 3.29289C10.3804 3.10536 10.6348 3 10.9 3C11.1652 3 11.4196 3.10536 11.6071 3.29289C11.7946 3.48043 11.9 3.73478 11.9 4V15.6L15.2 12.3C15.286 12.1854 15.3956 12.0906 15.5213 12.022C15.6471 11.9534 15.7862 11.9127 15.9291 11.9025C16.072 11.8924 16.2154 11.913 16.3497 11.9631C16.4839 12.0132 16.6058 12.0916 16.7071 12.1929C16.8084 12.2942 16.8868 12.4161 16.9369 12.5503C16.987 12.6845 17.0076 12.828 16.9975 12.9709C16.9873 13.1138 16.9466 13.2529 16.878 13.3787C16.8094 13.5044 16.7146 13.614 16.6 13.7Z\" fill=\"currentColor\"/>\n    </svg>\n  `\n\n  $upDownArrow = `\n    <svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M21.6 13.7L16.6 18.7C16.4 18.9 16.2 19 15.9 19C15.6 19 15.4 18.9 15.2 18.7L10.2 13.7C10.0556 13.5074 9.98545 13.2692 10.0025 13.0291C10.0196 12.789 10.1227 12.5631 10.2929 12.3929C10.4631 12.2227 10.689 12.1196 10.9291 12.1025C11.1692 12.0854 11.4074 12.1556 11.6 12.3L14.9 15.6V4C14.9 3.73478 15.0054 3.48043 15.1929 3.29289C15.3804 3.10536 15.6348 3 15.9 3C16.1652 3 16.4196 3.10536 16.6071 3.29289C16.7946 3.48043 16.9 3.73478 16.9 4V15.6L20.2 12.3C20.286 12.1854 20.3956 12.0906 20.5213 12.022C20.6471 11.9534 20.7862 11.9127 20.9291 11.9025C21.072 11.8924 21.2154 11.913 21.3497 11.9631C21.4839 12.0132 21.6058 12.0916 21.7071 12.1929C21.8084 12.2942 21.8868 12.4161 21.9369 12.5503C21.987 12.6845 22.0076 12.828 21.9975 12.9709C21.9873 13.1138 21.9466 13.2529 21.878 13.3787C21.8094 13.5044 21.7146 13.614 21.6 13.7Z\" fill=\"currentColor\"/>\n      <path d=\"M0.400001 8.3L5.4 3.3C5.6 3.1 5.8 3.00001 6.1 3.00001C6.4 3.00001 6.6 3.1 6.8 3.3L11.8 8.3C11.9444 8.49258 12.0145 8.73078 11.9975 8.97089C11.9804 9.211 11.8773 9.4369 11.7071 9.60711C11.5369 9.77732 11.311 9.88042 11.0709 9.89749C10.8308 9.91455 10.5926 9.84443 10.4 9.7L7.1 6.4L7.1 18C7.1 18.2652 6.99464 18.5196 6.80711 18.7071C6.61957 18.8946 6.36522 19 6.1 19C5.83478 19 5.58043 18.8946 5.39289 18.7071C5.20536 18.5196 5.1 18.2652 5.1 18L5.1 6.4L1.8 9.7C1.71404 9.81462 1.60445 9.90943 1.47866 9.97801C1.35286 10.0466 1.2138 10.0873 1.07089 10.0975C0.927978 10.1076 0.784553 10.087 0.650325 10.0369C0.516098 9.98677 0.394202 9.90842 0.292894 9.80711C0.191585 9.7058 0.113229 9.58391 0.0631299 9.44968C0.0130312 9.31545 -0.00763965 9.17203 0.00251678 9.02911C0.0126732 8.8862 0.05342 8.74714 0.121998 8.62135C0.190576 8.49556 0.285383 8.38597 0.400001 8.3Z\" fill=\"currentColor\"/>\n    </svg>\n  `\n\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<TableConfig>} [config] - Sortable table config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $head = this.$root.querySelector('thead')\n    const $body = this.$root.querySelector('tbody')\n\n    if (!$head) {\n      throw new ElementError({\n        component: Table,\n        identifier: 'Table head (`<thead>`)'\n      })\n    }\n\n    if (!$body) {\n      throw new ElementError({\n        component: Table,\n        identifier: 'Table body (`<tbody>`)'\n      })\n    }\n\n    this.$head = $head\n    this.$body = $body\n    this.$caption = this.$root.querySelector('caption')\n\n    this.$headings = Array.from(this.$head.querySelectorAll('th'))\n\n    const sortableHeadingsCount = this.$headings.filter((heading) =>\n      heading.getAttribute('aria-sort')\n    ).length\n\n    if (sortableHeadingsCount > 0) {\n      this.$root.classList.add('nhsuk-table--with-sortable-columns')\n      this.createHeadingButtons()\n      this.updateCaption()\n      this.updateDirectionIndicators()\n      this.createStatusBox()\n      this.initialiseSortedColumn()\n\n      this.$head.addEventListener('click', this.onSortButtonClick.bind(this))\n    }\n  }\n\n  createHeadingButtons() {\n    for (const $heading of this.$headings) {\n      if ($heading.hasAttribute('aria-sort')) {\n        this.createHeadingButton($heading)\n      }\n    }\n  }\n\n  /**\n   * @param {HTMLTableCellElement} $heading\n   */\n  createHeadingButton($heading) {\n    const index = this.$headings.indexOf($heading)\n    const $button = document.createElement('button')\n\n    $button.setAttribute('type', 'button')\n    $button.dataset.index = `${index}`\n    $button.textContent = $heading.textContent\n\n    $heading.textContent = ''\n    $heading.appendChild($button)\n  }\n\n  createStatusBox() {\n    this.$status = document.createElement('div')\n\n    this.$status.setAttribute('aria-atomic', 'true')\n    this.$status.setAttribute('aria-live', 'polite')\n    this.$status.setAttribute('class', 'nhsuk-u-visually-hidden')\n    this.$status.setAttribute('role', 'status')\n\n    this.$root.insertAdjacentElement('afterend', this.$status)\n  }\n\n  initialiseSortedColumn() {\n    const $rows = this.getTableRowsArray()\n\n    const $heading = this.$root.querySelector(\n      'th[aria-sort=\"ascending\"], th[aria-sort=\"descending\"]'\n    )\n    const $sortButton = $heading?.querySelector('button')\n    const sortDirection = $heading?.getAttribute('aria-sort')\n\n    const columnNumber = Number.parseInt($sortButton?.dataset.index ?? '0', 10)\n\n    if (\n      !$heading ||\n      !$sortButton ||\n      !(sortDirection === 'ascending' || sortDirection === 'descending')\n    ) {\n      return\n    }\n\n    const $sortedRows = this.sort($rows, columnNumber, sortDirection)\n    this.addRows($sortedRows)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onSortButtonClick(event) {\n    const $target = /** @type {HTMLElement} */ (event.target)\n    const $button = $target.closest('button')\n\n    if (!$button?.parentElement) {\n      return\n    }\n\n    const $heading = $button.parentElement\n    const sortDirection = $heading.getAttribute('aria-sort')\n\n    const columnNumber = Number.parseInt($button.dataset.index ?? '0', 10)\n\n    const newSortDirection =\n      sortDirection === 'none' || sortDirection === 'descending'\n        ? 'ascending'\n        : 'descending'\n\n    const $rows = this.getTableRowsArray()\n    const $sortedRows = this.sort($rows, columnNumber, newSortDirection)\n\n    this.addRows($sortedRows)\n    this.removeButtonStates()\n    this.updateButtonState($button, newSortDirection)\n    this.updateDirectionIndicators()\n  }\n\n  updateCaption() {\n    if (!this.$caption) {\n      return\n    }\n\n    let assistiveText = this.$caption.querySelector('.nhsuk-u-visually-hidden')\n    if (assistiveText) {\n      return\n    }\n\n    assistiveText = document.createElement('span')\n    assistiveText.classList.add('nhsuk-u-visually-hidden')\n    assistiveText.textContent = 'â€ˆ(column headers with buttons are sortable).'\n\n    this.$caption.appendChild(assistiveText)\n  }\n\n  /**\n   * @param {HTMLButtonElement} $button\n   * @param {string} direction\n   */\n  updateButtonState($button, direction) {\n    const { config, $status } = this\n\n    if (\n      !(direction === 'ascending' || direction === 'descending') ||\n      !$button.parentElement ||\n      !config.statusMessage ||\n      !$status\n    ) {\n      return\n    }\n\n    const directionText = config[`${direction}Text`]\n    if (!directionText) {\n      return\n    }\n\n    $button.parentElement.setAttribute('aria-sort', direction)\n    let message = config.statusMessage\n\n    message = message.replace(/%heading%/, $button.textContent.trim())\n    message = message.replace(/%direction%/, directionText)\n    $status.textContent = message\n  }\n\n  updateDirectionIndicators() {\n    for (const $heading of this.$headings) {\n      const $button = $heading.querySelector('button')\n\n      if ($heading.hasAttribute('aria-sort') && $button) {\n        const direction = $heading.getAttribute('aria-sort')\n        $button.querySelector('svg')?.remove()\n\n        switch (direction) {\n          case 'ascending':\n            $button.insertAdjacentHTML('beforeend', this.$upArrow)\n            break\n          case 'descending':\n            $button.insertAdjacentHTML('beforeend', this.$downArrow)\n            break\n          default:\n            $button.insertAdjacentHTML('beforeend', this.$upDownArrow)\n        }\n      }\n    }\n  }\n\n  removeButtonStates() {\n    for (const $heading of this.$headings) {\n      if ($heading.hasAttribute('aria-sort')) {\n        $heading.setAttribute('aria-sort', 'none')\n      }\n    }\n  }\n\n  /**\n   * @param {HTMLTableRowElement[]} $rows\n   */\n  addRows($rows) {\n    for (const $row of $rows) {\n      this.$body.append($row)\n    }\n  }\n\n  getTableRowsArray() {\n    return Array.from(this.$body.querySelectorAll('tr'))\n  }\n\n  /**\n   * @param {HTMLTableRowElement[]} $rows\n   * @param {number} columnNumber\n   * @param {string} sortDirection\n   */\n  sort($rows, columnNumber, sortDirection) {\n    return $rows.sort(($rowA, $rowB) => {\n      const $tdA = $rowA.querySelectorAll('td, th')[columnNumber]\n      const $tdB = $rowB.querySelectorAll('td, th')[columnNumber]\n\n      if (!($tdA instanceof HTMLElement) || !($tdB instanceof HTMLElement)) {\n        return 0\n      }\n\n      const valueA =\n        sortDirection === 'ascending'\n          ? this.getCellValue($tdA)\n          : this.getCellValue($tdB)\n\n      const valueB =\n        sortDirection === 'ascending'\n          ? this.getCellValue($tdB)\n          : this.getCellValue($tdA)\n\n      return typeof valueA === 'number' && typeof valueB === 'number'\n        ? valueA - valueB\n        : valueA.toString().localeCompare(valueB.toString())\n    })\n  }\n\n  /**\n   * @param {HTMLElement} $cell\n   */\n  getCellValue($cell) {\n    const val = $cell.dataset.sortValue ?? $cell.innerHTML\n    const valAsNumber = Number(val)\n\n    return Number.isFinite(valAsNumber)\n      ? valAsNumber // Exclude invalid numbers, infinity etc\n      : val\n  }\n\n  /**\n   * Sortable table config\n   *\n   * @see {@link TableConfig}\n   * @constant\n   * @type {TableConfig}\n   */\n  static defaults = Object.freeze({\n    statusMessage: 'Sort by %heading% (%direction%)',\n    ascendingText: 'ascending',\n    descendingText: 'descending'\n  })\n\n  /**\n   * Sortable table config schema\n   *\n   * @constant\n   * @satisfies {Schema<TableConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      statusMessage: { type: 'string' },\n      ascendingText: { type: 'string' },\n      descendingText: { type: 'string' }\n    }\n  })\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-table'\n}\n\n/**\n * Initialise table component\n *\n * @deprecated Use {@link createAll | `createAll(Table)`} instead.\n * @param {InitOptions} [options]\n */\nexport function initTables(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $tables = $scope?.querySelectorAll(\n    `[data-module=\"${Table.moduleName}\"]`\n  )\n\n  $tables?.forEach(($root) => {\n    new Table($root)\n  })\n}\n\n/**\n * Table config\n *\n * @typedef {object} TableConfig\n * @property {string} [statusMessage] - Status message\n * @property {string} [ascendingText] - Ascending text\n * @property {string} [descendingText] - Descending text\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","/* eslint-disable @typescript-eslint/no-deprecated */\n\nimport { normaliseOptions } from '../../common/configuration/index.mjs'\nimport { getBreakpoint } from '../../common/index.mjs'\nimport { ConfigurableComponent } from '../../configurable-component.mjs'\nimport { ElementError } from '../../errors/index.mjs'\n\n/**\n * Tabs component\n *\n * @augments {ConfigurableComponent<TabsConfig>}\n */\nexport class Tabs extends ConfigurableComponent {\n  changingHash = false\n\n  /**\n   * @type {string | undefined}\n   * @deprecated Use {@link Tabs.panelClass} instead.\n   */\n  jsHiddenClass\n\n  /**\n   * @type {MediaQueryList | null}\n   */\n  mql = null\n\n  /**\n   * @param {Element | null} $root - HTML element to use for component\n   * @param {Partial<TabsConfig>} [config] - Tabs config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const { listClass, listItemClass, tabClass } = this.config\n\n    const $tabs = this.$root.querySelectorAll(`a.${tabClass}`)\n    if (!$tabs.length) {\n      throw new ElementError({\n        component: Tabs,\n        identifier: `Links (\\`<a class=\"${tabClass}\">\\`)`\n      })\n    }\n\n    this.$tabs = $tabs\n\n    // Save bound functions so we can remove event listeners during teardown\n    this.boundTabClick = this.onTabClick.bind(this)\n    this.boundTabKeydown = this.onTabKeydown.bind(this)\n    this.boundOnHashChange = this.onHashChange.bind(this)\n\n    const $tabList = this.$root.querySelector(`ul.${listClass}`)\n    const $tabListItems = this.$root.querySelectorAll(`li.${listItemClass}`)\n\n    if (!$tabList) {\n      throw new ElementError({\n        component: Tabs,\n        identifier: `List (\\`<ul class=\"${listClass}\">\\`)`\n      })\n    }\n\n    if (!$tabListItems.length) {\n      throw new ElementError({\n        component: Tabs,\n        identifier: `List items (\\`<li class=\"${listItemClass}\">\\`)`\n      })\n    }\n\n    this.$tabList = $tabList\n    this.$tabListItems = $tabListItems\n\n    this.setupResponsiveChecks()\n  }\n\n  /**\n   * Setup viewport resize check\n   */\n  setupResponsiveChecks() {\n    const breakpoint = getBreakpoint('tablet')\n\n    if (!breakpoint.value) {\n      throw new ElementError({\n        component: Tabs,\n        identifier: `CSS custom property (\\`${breakpoint.property}\\`) on pseudo-class \\`:root\\``\n      })\n    }\n\n    // Media query list for NHS.UK frontend tablet breakpoint\n    this.mql = window.matchMedia(`(min-width: ${breakpoint.value})`)\n\n    // MediaQueryList.addEventListener isn't supported by Safari < 14 so we need\n    // to be able to fall back to the deprecated MediaQueryList.addListener\n    if ('addEventListener' in this.mql) {\n      this.mql.addEventListener('change', () => this.checkMode())\n    } else {\n      // @ts-expect-error Property 'addListener' does not exist\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      this.mql.addListener(() => this.checkMode())\n    }\n\n    this.checkMode()\n  }\n\n  /**\n   * Setup or teardown handler for viewport resize check\n   */\n  checkMode() {\n    if (this.mql?.matches) {\n      this.setup()\n    } else {\n      this.teardown()\n    }\n  }\n\n  /**\n   * Setup tab component\n   */\n  setup() {\n    this.$tabList.setAttribute('role', 'tablist')\n\n    this.$tabListItems.forEach(($item) => {\n      $item.setAttribute('role', 'presentation')\n    })\n\n    this.$tabs.forEach(($tab) => {\n      // Set HTML attributes\n      this.setAttributes($tab)\n\n      // Handle events\n      $tab.addEventListener('click', this.boundTabClick, true)\n      $tab.addEventListener('keydown', this.boundTabKeydown, true)\n\n      // Remove old active panels\n      this.hideTab($tab)\n    })\n\n    // Show either the active tab according to the URL's hash or the first tab\n    const $activeTab = this.getTab(window.location.hash) ?? this.$tabs[0]\n\n    this.showTab($activeTab)\n\n    // Handle hashchange events\n    window.addEventListener('hashchange', this.boundOnHashChange, true)\n  }\n\n  /**\n   * Teardown tab component\n   */\n  teardown() {\n    this.$tabList.removeAttribute('role')\n\n    this.$tabListItems.forEach(($item) => {\n      $item.removeAttribute('role')\n    })\n\n    this.$tabs.forEach(($tab) => {\n      // Remove events\n      $tab.removeEventListener('click', this.boundTabClick, true)\n      $tab.removeEventListener('keydown', this.boundTabKeydown, true)\n\n      // Unset HTML attributes\n      this.unsetAttributes($tab)\n    })\n\n    // Remove hashchange event handler\n    window.removeEventListener('hashchange', this.boundOnHashChange, true)\n  }\n\n  /**\n   * Handle hashchange event\n   *\n   * @returns {void} Returns void when prevented\n   */\n  onHashChange() {\n    const { hash } = window.location\n    const $tabWithHash = this.getTab(hash)\n    if (!$tabWithHash) {\n      return\n    }\n\n    // Prevent changing the hash\n    if (this.changingHash) {\n      this.changingHash = false\n      return\n    }\n\n    // Show either the active tab according to the URL's hash or the first tab\n    const $previousTab = this.getCurrentTab()\n    if (!$previousTab) {\n      return\n    }\n\n    this.hideTab($previousTab)\n    this.showTab($tabWithHash)\n    $tabWithHash.focus()\n  }\n\n  /**\n   * Hide panel for tab link\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  hideTab($tab) {\n    this.unhighlightTab($tab)\n    this.hidePanel($tab)\n  }\n\n  /**\n   * Show panel for tab link\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  showTab($tab) {\n    this.highlightTab($tab)\n    this.showPanel($tab)\n  }\n\n  /**\n   * Get tab link by hash\n   *\n   * @param {string} hash - Hash fragment including #\n   * @returns {HTMLAnchorElement | null} Tab link\n   */\n  getTab(hash) {\n    const { tabClass } = this.config\n    return this.$root.querySelector(`a.${tabClass}[href=\"${hash}\"]`)\n  }\n\n  /**\n   * Set tab link and panel attributes\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  setAttributes($tab) {\n    const panelId = $tab.hash.replace('#', '')\n    if (!panelId) {\n      return\n    }\n\n    // Set tab attributes\n    $tab.setAttribute('id', `tab_${panelId}`)\n    $tab.setAttribute('role', 'tab')\n    $tab.setAttribute('aria-controls', panelId)\n    $tab.setAttribute('aria-selected', 'false')\n    $tab.setAttribute('tabindex', '-1')\n\n    // Set panel attributes\n    const $panel = this.getPanel($tab)\n    if (!$panel) {\n      return\n    }\n\n    const { panelClass } = this.config\n\n    $panel.setAttribute('role', 'tabpanel')\n    $panel.setAttribute('aria-labelledby', $tab.id)\n    $panel.classList.add(this.jsHiddenClass ?? `${panelClass}--hidden`)\n  }\n\n  /**\n   * Unset tab link and panel attributes\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  unsetAttributes($tab) {\n    // unset tab attributes\n    $tab.removeAttribute('id')\n    $tab.removeAttribute('role')\n    $tab.removeAttribute('aria-controls')\n    $tab.removeAttribute('aria-selected')\n    $tab.removeAttribute('tabindex')\n\n    // unset panel attributes\n    const $panel = this.getPanel($tab)\n    if (!$panel) {\n      return\n    }\n\n    const { panelClass } = this.config\n\n    $panel.removeAttribute('role')\n    $panel.removeAttribute('aria-labelledby')\n    $panel.classList.remove(this.jsHiddenClass ?? `${panelClass}--hidden`)\n  }\n\n  /**\n   * Handle tab link clicks\n   *\n   * @param {MouseEvent} event - Mouse click event\n   * @returns {void} Returns void\n   */\n  onTabClick(event) {\n    const $currentTab = this.getCurrentTab()\n    const $nextTab = event.currentTarget\n\n    if (!$currentTab || !($nextTab instanceof HTMLAnchorElement)) {\n      return\n    }\n\n    event.preventDefault()\n\n    this.hideTab($currentTab)\n    this.showTab($nextTab)\n    this.createHistoryEntry($nextTab)\n  }\n\n  /**\n   * Update browser URL hash fragment for tab\n   *\n   * - Allows back/forward to navigate tabs\n   * - Avoids page jump when hash changes\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  createHistoryEntry($tab) {\n    const $panel = this.getPanel($tab)\n    if (!$panel) {\n      return\n    }\n\n    // Save and restore the id so the page doesn't jump when a user clicks a tab\n    // (which changes the hash)\n    const panelId = $panel.id\n    $panel.id = ''\n    this.changingHash = true\n    window.location.hash = panelId\n    $panel.id = panelId\n  }\n\n  /**\n   * Handle tab keydown event\n   *\n   * - Press right arrow for next tab\n   * - Press left arrow for previous tab\n   *\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  onTabKeydown(event) {\n    switch (event.key) {\n      // 'Left' and 'Right' required for Edge 16 support.\n      case 'ArrowLeft':\n      case 'Left':\n        this.activatePreviousTab()\n        event.preventDefault()\n        break\n      case 'ArrowRight':\n      case 'Right':\n        this.activateNextTab()\n        event.preventDefault()\n        break\n    }\n  }\n\n  /**\n   * Activate next tab\n   */\n  activateNextTab() {\n    const $currentTab = this.getCurrentTab()\n    if (!$currentTab?.parentElement) {\n      return\n    }\n\n    const $nextTabListItem = $currentTab.parentElement.nextElementSibling\n    if (!$nextTabListItem) {\n      return\n    }\n\n    const { tabClass } = this.config\n\n    const $nextTab = $nextTabListItem.querySelector(`a.${tabClass}`)\n    if (!$nextTab) {\n      return\n    }\n\n    this.hideTab($currentTab)\n    this.showTab($nextTab)\n    $nextTab.focus()\n    this.createHistoryEntry($nextTab)\n  }\n\n  /**\n   * Activate previous tab\n   */\n  activatePreviousTab() {\n    const $currentTab = this.getCurrentTab()\n    if (!$currentTab?.parentElement) {\n      return\n    }\n\n    const $previousTabListItem =\n      $currentTab.parentElement.previousElementSibling\n    if (!$previousTabListItem) {\n      return\n    }\n\n    const { tabClass } = this.config\n\n    const $previousTab = $previousTabListItem.querySelector(`a.${tabClass}`)\n    if (!$previousTab) {\n      return\n    }\n\n    this.hideTab($currentTab)\n    this.showTab($previousTab)\n    $previousTab.focus()\n    this.createHistoryEntry($previousTab)\n  }\n\n  /**\n   * Get tab panel for tab link\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   * @returns {Element | null} Tab panel\n   */\n  getPanel($tab) {\n    const panelId = $tab.hash.replace('#', '')\n    if (!panelId) {\n      return null\n    }\n\n    return this.$root.querySelector(`#${panelId}`)\n  }\n\n  /**\n   * Show tab panel for tab link\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  showPanel($tab) {\n    const $panel = this.getPanel($tab)\n    if (!$panel) {\n      return\n    }\n\n    const { panelClass } = this.config\n\n    $panel.classList.remove(this.jsHiddenClass ?? `${panelClass}--hidden`)\n  }\n\n  /**\n   * Hide tab panel for tab link\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  hidePanel($tab) {\n    const $panel = this.getPanel($tab)\n    if (!$panel) {\n      return\n    }\n\n    const { panelClass } = this.config\n\n    $panel.classList.add(this.jsHiddenClass ?? `${panelClass}--hidden`)\n  }\n\n  /**\n   * Unset 'selected' state for tab link\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  unhighlightTab($tab) {\n    if (!$tab.parentElement) {\n      return\n    }\n\n    const { listItemClass } = this.config\n\n    $tab.setAttribute('aria-selected', 'false')\n    $tab.parentElement.classList.remove(`${listItemClass}--selected`)\n    $tab.setAttribute('tabindex', '-1')\n  }\n\n  /**\n   * Set 'selected' state for tab link\n   *\n   * @param {HTMLAnchorElement} $tab - Tab link\n   */\n  highlightTab($tab) {\n    if (!$tab.parentElement) {\n      return\n    }\n\n    const { listItemClass } = this.config\n\n    $tab.setAttribute('aria-selected', 'true')\n    $tab.parentElement.classList.add(`${listItemClass}--selected`)\n    $tab.setAttribute('tabindex', '0')\n  }\n\n  /**\n   * Get current tab link\n   *\n   * @returns {HTMLAnchorElement | null} Tab link\n   */\n  getCurrentTab() {\n    const { listItemClass, tabClass } = this.config\n    return this.$root.querySelector(`.${listItemClass}--selected a.${tabClass}`)\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes\n   */\n  static moduleName = 'nhsuk-tabs'\n\n  /**\n   * Tabs default config\n   *\n   * @see {@link TabsConfig}\n   * @constant\n   * @type {TabsConfig}\n   */\n  static defaults = Object.freeze({\n    panelClass: 'nhsuk-tabs__panel',\n    listClass: 'nhsuk-tabs__list',\n    listItemClass: 'nhsuk-tabs__list-item',\n    tabClass: 'nhsuk-tabs__tab'\n  })\n\n  /**\n   * Tabs config schema\n   *\n   * @constant\n   * @satisfies {Schema<TabsConfig>}\n   */\n  static schema = Object.freeze({\n    properties: {\n      panelClass: { type: 'string' },\n      listClass: { type: 'string' },\n      listItemClass: { type: 'string' },\n      tabClass: { type: 'string' }\n    }\n  })\n}\n\n/**\n * Initialise tabs component\n *\n * @deprecated Use {@link createAll | `createAll(Tabs, options)`} instead.\n * @param {InitOptions & Partial<TabsConfig>} [options]\n */\nexport function initTabs(options) {\n  const { scope: $scope } = normaliseOptions(options)\n\n  const $tabs = $scope?.querySelectorAll(`[data-module=\"${Tabs.moduleName}\"]`)\n\n  $tabs?.forEach(($root) => {\n    new Tabs($root, options)\n  })\n}\n\n/**\n * Tabs config\n *\n * @typedef {object} TabsConfig\n * @property {string} panelClass - Tabs panel class\n * @property {string} listClass - Tabs list class\n * @property {string} listItemClass - Tabs list item class\n * @property {string} tabClass - Tabs link class\n */\n\n/**\n * @import { createAll, InitOptions } from '../../index.mjs'\n * @import { Schema } from '../../common/configuration/index.mjs'\n */\n","import { normaliseOptions } from './common/configuration/index.mjs'\nimport { isObject, isSupported } from './common/index.mjs'\nimport {\n  Button,\n  CharacterCount,\n  Checkboxes,\n  ErrorSummary,\n  FileUpload,\n  Header,\n  NotificationBanner,\n  PasswordInput,\n  Radios,\n  SkipLink,\n  Table,\n  Tabs\n} from './components/index.mjs'\nimport { ElementError, SupportError } from './errors/index.mjs'\n\n/**\n * Initialise all components\n *\n * Use the `data-module` attributes to find and initialise all of the\n * components provided as part of NHS.UK frontend.\n *\n * @overload\n * @param {Config} [config] - Config for all components (with optional scope)\n * @returns {void}\n */\n\n/**\n * @overload\n * @param {Element | Document | null} [$scope] - Scope of the document to search within\n * @returns {void}\n */\n\n/**\n * @param {Config | Element | Document | null} [scopeOrConfig]\n */\nexport function initAll(scopeOrConfig = {}) {\n  const config = isObject(scopeOrConfig) ? scopeOrConfig : {}\n\n  // Extract initialisation options\n  const options = normaliseOptions(scopeOrConfig)\n\n  try {\n    // Skip initialisation when NHS.UK frontend is not supported\n    if (!isSupported()) {\n      throw new SupportError()\n    }\n\n    // Users can initialise NHS.UK frontend in certain sections of the page\n    // unless the scope is null (for example, query selector not found)\n    if (options.scope === null) {\n      throw new ElementError({\n        element: options.scope,\n        identifier: 'NHS.UK frontend scope element (`$scope`)'\n      })\n    }\n  } catch (error) {\n    if (options.onError) {\n      options.onError(error, {\n        config\n      })\n    } else {\n      console.log(error)\n    }\n\n    return\n  }\n\n  const components = /** @type {const} */ ([\n    [Button, config.button],\n    [CharacterCount, config.characterCount],\n    [Checkboxes, config.checkboxes],\n    [ErrorSummary, config.errorSummary],\n    [FileUpload, config.fileUpload],\n    [Header, config.header],\n    [NotificationBanner, config.notificationBanner],\n    [PasswordInput, config.passwordInput],\n    [Radios, config.radios],\n    [SkipLink, config.skipLink],\n    [Table, config.table],\n    [Tabs, config.tabs]\n  ])\n\n  components.forEach(([Component, componentConfig]) => {\n    createAll(Component, componentConfig, options)\n  })\n}\n\n/**\n * Create all instances of a specific component on the page\n *\n * Uses the `data-module` attribute to find all elements matching the specified\n * component on the page, creating instances of the component object for each\n * of them.\n *\n * Any component errors will be caught and logged to the console.\n *\n * @template {CompatibleClass | CompatibleClass<typeof ConfigurableComponent>} ComponentClass\n * @overload\n * @param {ComponentClass} Component - Component class to initialise\n * @param {ComponentConfig<ComponentClass>} [config] - Config supplied to component\n * @param {CreateAllOptions<ComponentClass>} [options] - Options including scope of the document to search within and callback function if error throw by component on init\n * @returns {InstanceType<ComponentClass>[]} Array of initialised components\n */\n\n/**\n * @template {CompatibleClass | CompatibleClass<typeof ConfigurableComponent>} ComponentClass\n * @overload\n * @param {ComponentClass} Component - Component class to initialise\n * @param {ComponentConfig<ComponentClass>} [config] - Config supplied to component\n * @param {OnErrorCallback<ComponentClass>} [onError] - Initialisation error callback\n * @returns {InstanceType<ComponentClass>[]} Array of initialised components\n */\n\n/**\n * @template {CompatibleClass | CompatibleClass<typeof ConfigurableComponent>} ComponentClass\n * @overload\n * @param {ComponentClass} Component - Component class to initialise\n * @param {ComponentConfig<ComponentClass>} [config] - Config supplied to component\n * @param {Element | Document | null} [$scope] - Scope of the document to search within\n * @returns {InstanceType<ComponentClass>[]} Array of initialised components\n */\n\n/**\n * @template {CompatibleClass | CompatibleClass<typeof ConfigurableComponent>} ComponentClass\n * @param {ComponentClass} Component - Component class to initialise\n * @param {ComponentConfig<ComponentClass>} [config] - Config supplied to component\n * @param {CreateAllOptions<ComponentClass> | OnErrorCallback<ComponentClass> | Element | Document | null} [scopeOrOptions]\n */\nexport function createAll(Component, config, scopeOrOptions) {\n  let /** @type {NodeListOf<Element> | undefined} */ $elements\n\n  // Extract initialisation options\n  const options = normaliseOptions(scopeOrOptions)\n\n  try {\n    // Skip initialisation when NHS.UK frontend is not supported\n    if (!isSupported()) {\n      throw new SupportError()\n    }\n\n    // Users can initialise NHS.UK frontend in certain sections of the page\n    // unless the scope is null (for example, query selector not found)\n    if (options.scope === null) {\n      throw new ElementError({\n        element: options.scope,\n        component: Component,\n        identifier: 'Scope element (`$scope`)'\n      })\n    }\n\n    $elements = options.scope?.querySelectorAll(\n      `[data-module=\"${Component.moduleName}\"]`\n    )\n  } catch (error) {\n    if (options.onError) {\n      options.onError(error, {\n        component: Component,\n        config\n      })\n    } else {\n      console.log(error)\n    }\n\n    return []\n  }\n\n  return Array.from($elements ?? [])\n    .map(($element) => {\n      try {\n        return /** @type {InstanceType<ComponentClass>} */ (\n          // Only pass config to components that accept it\n          !!config && 'defaults' in Component\n            ? new Component($element, config)\n            : new Component($element)\n        )\n      } catch (error) {\n        if (options.onError) {\n          options.onError(error, {\n            element: $element,\n            component: Component,\n            config\n          })\n        } else {\n          console.log(error)\n        }\n\n        return null\n      }\n    })\n    .filter((instance) => !!instance) // Exclude components that errored\n}\n\nexport * from './i18n.mjs'\nexport * from './common/index.mjs'\nexport * from './common/configuration/index.mjs'\nexport * from './components/index.mjs'\nexport * from './errors/index.mjs'\n\n/**\n * NHS.UK frontend config for all components via `initAll()`\n *\n * @typedef {object} Config\n * @property {Element | Document | null} [scope] - Scope of the document to search within\n * @property {OnErrorCallback<CompatibleClass>} [onError] - Initialisation error callback\n * @property {ComponentConfig<typeof Button>} [button] - Button config\n * @property {ComponentConfig<typeof CharacterCount>} [characterCount] - Character count config\n * @property {ComponentConfig<typeof Checkboxes>} [checkboxes] - Checkboxes config\n * @property {ComponentConfig<typeof ErrorSummary>} [errorSummary] - Error Summary config\n * @property {ComponentConfig<typeof FileUpload>} [fileUpload] - File upload config\n * @property {ComponentConfig<typeof Header>} [header] - Header config\n * @property {ComponentConfig<typeof NotificationBanner>} [notificationBanner] - Notification Banner config\n * @property {ComponentConfig<typeof PasswordInput>} [passwordInput] - Password Input config\n * @property {ComponentConfig<typeof Radios>} [radios] - Radios config\n * @property {ComponentConfig<typeof SkipLink>} [skipLink] - Skip Link config\n * @property {ComponentConfig<typeof Table>} [table] - Table config\n * @property {ComponentConfig<typeof Tabs>} [tabs] - Tabs config\n */\n\n/**\n * Component config keys, e.g. `button` and `characterCount`\n *\n * @typedef {keyof Omit<Config, 'scope' | 'onError'>} ConfigKey\n */\n\n/**\n * Component config\n *\n * @template {CompatibleClass} ComponentClass\n * @typedef {ConstructorParameters<ComponentClass>[1]} ComponentConfig\n */\n\n/**\n * Initialisation error context\n *\n * Contains the element, component class and configuration\n *\n * @template {CompatibleClass} ComponentClass\n * @typedef {object} ErrorContext\n * @property {Element} [element] - Element used for component module initialisation\n * @property {ComponentClass} [component] - Class of component\n * @property {Config | ComponentConfig<ComponentClass>} config - Config supplied to components\n */\n\n/**\n * Initialisation error callback\n *\n * @template {CompatibleClass} ComponentClass\n * @callback OnErrorCallback\n * @param {unknown} error - Thrown error\n * @param {ErrorContext<ComponentClass>} context - Object containing the element, component class and configuration\n */\n\n/**\n * Initialisation options\n *\n * @template {CompatibleClass} ComponentClass\n * @typedef {object} CreateAllOptions\n * @property {Element | Document | null} [scope] - Scope of the document to search within\n * @property {OnErrorCallback<ComponentClass>} [onError] - Initialisation error callback\n */\n\n/**\n * @import { CompatibleClass } from './component.mjs'\n * @import { ConfigurableComponent } from './configurable-component.mjs'\n */\n"],"names":["closestAttributeValue","$element","attributeName","$closestElementWithAttribute","closest","getAttribute","version","toggleConditionalInput","$input","className","HTMLInputElement","targetId","target","document","getElementById","setAttribute","checked","toString","classList","toggle","getBreakpoint","name","property","value","window","getComputedStyle","documentElement","getPropertyValue","undefined","setFocus","options","isFocusable","onFocus","removeEventListener","addEventListener","onBlur","call","removeAttribute","onBeforeFocus","focus","isInitialised","$root","moduleName","HTMLElement","hasAttribute","isSupported","$scope","body","contains","isObject","option","Array","isArray","isScope","Element","Document","formatErrorMessage","Component","message","normaliseString","isValid","trimmedValue","trim","output","outputType","type","includes","length","isFinite","Number","normaliseArray","reviver","getArrayValue","values","_JSON$parse","JSON","parse","decodeURIComponent","_unused","map","filter","key","extractConfigByNamespace","schema","dataset","namespace","properties","newObject","Object","entries","current","keyParts","split","index","mergeConfigs","configObjects","formattedConfigObject","configObject","keys","override","NHSUKFrontendError","Error","constructor","args","SupportError","supportMessage","HTMLScriptElement","prototype","ConfigError","ElementError","component","identifier","element","expectedType","InitError","componentOrMessage","normaliseDataset","out","entry","field","normaliseOptions","scopeOrOptions","onError","scope","validateConfig","config","validationErrors","conditions","errors","required","errorMessage","every","push","_self","globalThis","self","childConstructor","elementType","checkSupport","checkInitialised","ConfigurableComponent","defaults","datasetConfig","configOverride","_datasetConfig","DEBOUNCE_TIMEOUT_IN_SECONDS","Button","debounceFormSubmitTimer","event","handleKeyDown","debounce","preventDefault","click","preventDoubleClick","setTimeout","freeze","initButtons","$buttons","querySelectorAll","forEach","I18n","translations","_config$locale","locale","lang","t","lookupKey","translation","count","translationPluralForm","getPluralSuffix","match","replacePlaceholders","translationString","formatter","Intl","NumberFormat","supportedLocalesOf","replace","placeholderWithBraces","placeholderKey","hasOwnProperty","placeholderValue","format","hasIntlPluralRulesSupport","Boolean","PluralRules","preferredForm","select","console","warn","CharacterCount","_ref","lastInputTimestamp","lastInputValue","valueChecker","$textarea","querySelector","HTMLTextAreaElement","i18n","maxwords","maxlength","screenReaderCountMessageClass","textareaDescriptionClass","visibleCountMessageClass","maxLength","Infinity","textareaDescriptionId","id","$textareaDescription","$errorMessage","exec","textContent","insertAdjacentElement","$screenReaderCountMessage","createElement","add","$visibleCountMessage","remove","bindChangeEvents","updateCountMessage","configOverrides","text","_text$match","tokens","handleKeyUp","handleFocus","handleBlur","checkIfValueChanged","updateVisibleCountMessage","updateScreenReaderCountMessage","remainingNumber","isError","isOverThreshold","formattedUpdateMessage","countType","formatCountMessage","translationKeySuffix","Math","abs","threshold","currentLength","thresholdValue","Date","now","setInterval","clearInterval","charactersUnderLimit","one","other","charactersAtLimit","charactersOverLimit","wordsUnderLimit","wordsAtLimit","wordsOverLimit","textareaDescription","anyOf","initCharacterCounts","$characterCounts","Checkboxes","$inputs","_$input$dataset$ariaC","ariaControls","syncAllConditionalReveals","handleClick","syncConditionalRevealWithInputState","conditionalClass","unCheckAllInputsExcept","checkboxExclusiveGroup","exclusiveGroup","selectorGroup","allInputsWithSameName","$inputWithSameName","hasSameFormOwner","form","setInputState","unCheckExclusiveInputs","allInputsWithSameNameAndExclusiveBehaviour","$exclusiveInput","$clickedInput","hasAriaControls","initCheckboxes","$checkboxes","ErrorSummary","disableAutoFocus","focusOnPageLoad","getAssociatedLegendOrLabel","_document$querySelect","$fieldset","$legends","getElementsByTagName","$candidateLegend","legendTop","getBoundingClientRect","top","inputRect","height","innerHeight","inputBottom","focusTarget","$target","HTMLAnchorElement","inputId","hash","$legendOrLabel","scrollIntoView","preventScroll","initErrorSummary","FileUpload","enteredAnotherElement","dropZoneClass","dropButtonClass","dropButtonGroupClass","dropInstructionClass","chooseFilesButtonClass","chooseFilesButtonClassList","announcementsClass","statusClass","$label","findLabel","$dropZone","$dropButton","ariaDescribedBy","$status","innerText","formatStatusMessage","appendChild","$statusComma","$dropButtonGroup","$chooseFilesButton","append","$dropInstruction","onClick","bind","parentElement","_this$$input$parentEl","insertBefore","onChange","updateDisabledState","observeDisabledState","$announcements","onDrop","updateDropzoneVisibility","disabled","hideDraggingState","Node","dataTransfer","canDrop","showDraggingState","canFillInput","files","dispatchEvent","CustomEvent","matchesInputCapacity","items","countFileItems","types","numberOfFiles","multiple","fileCount","observer","MutationObserver","mutationList","mutation","observe","attributes","disabledStateClass","chooseFilesButton","dropInstruction","noFileChosen","multipleFilesChosen","enteredDropZone","leftDropZone","list","result","i","kind","initFileUploads","$fileUploads","Header","$navigation","$navigationList","$navigationItems","$menu","$menuToggle","$menuList","width","breakpoints","updateNavigationTimer","menuIsEnabled","menuIsOpen","navigationClass","navigationListClass","navigationItemClass","menuClass","menuToggleClass","HTMLButtonElement","handleEscapeKey","onEscapeKey","handleUpdateNavigation","updateNavigation","handleToggleMenu","toggleMenu","setupNavigation","resetNavigation","right","breakpoint","offsetWidth","clearTimeout","setupMenu","menuListClass","enableMenu","disableMenu","closeMenu","style","removeProperty","openMenu","setProperty","offsetHeight","menuItems","initHeader","NotificationBanner","initNotificationBanners","$notificationBanners","$notificationBanner","PasswordInput","$showHideButton","screenReaderStatusMessageClass","$screenReaderStatusMessage","hide","persisted","show","setType","isHidden","prefixButton","prefixStatus","showPassword","hidePassword","showPasswordAriaLabel","hidePasswordAriaLabel","passwordShownAnnouncement","passwordHiddenAnnouncement","initPasswordInputs","$passwordInputs","Radios","$allInputs","$clickedInputForm","$clickedInputName","hasSameName","initRadios","$radios","SkipLink","_this$$root$getAttrib","href","origin","location","pathname","linkedElementId","$linkedElement","focusedElementClassList","initSkipLinks","$skipLinks","Table","$upArrow","$downArrow","$upDownArrow","$head","$body","$caption","$headings","from","sortableHeadingsCount","heading","createHeadingButtons","updateCaption","updateDirectionIndicators","createStatusBox","initialiseSortedColumn","onSortButtonClick","$heading","createHeadingButton","indexOf","$button","_$sortButton$dataset$","$rows","getTableRowsArray","$sortButton","sortDirection","columnNumber","parseInt","$sortedRows","sort","addRows","_$button$dataset$inde","newSortDirection","removeButtonStates","updateButtonState","assistiveText","direction","statusMessage","directionText","_$button$querySelecto","insertAdjacentHTML","$row","$rowA","$rowB","$tdA","$tdB","valueA","getCellValue","valueB","localeCompare","$cell","_$cell$dataset$sortVa","val","sortValue","innerHTML","valAsNumber","ascendingText","descendingText","initTables","$tables","Tabs","changingHash","jsHiddenClass","mql","listClass","listItemClass","tabClass","$tabs","boundTabClick","onTabClick","boundTabKeydown","onTabKeydown","boundOnHashChange","onHashChange","$tabList","$tabListItems","setupResponsiveChecks","matchMedia","checkMode","addListener","_this$mql","matches","setup","teardown","_this$getTab","$item","$tab","setAttributes","hideTab","$activeTab","getTab","showTab","unsetAttributes","$tabWithHash","$previousTab","getCurrentTab","unhighlightTab","hidePanel","highlightTab","showPanel","_this$jsHiddenClass","panelId","$panel","getPanel","panelClass","_this$jsHiddenClass2","$currentTab","$nextTab","currentTarget","createHistoryEntry","activatePreviousTab","activateNextTab","$nextTabListItem","nextElementSibling","$previousTabListItem","previousElementSibling","_this$jsHiddenClass3","_this$jsHiddenClass4","initTabs","initAll","scopeOrConfig","error","log","components","button","characterCount","checkboxes","errorSummary","fileUpload","header","notificationBanner","passwordInput","radios","skipLink","table","tabs","componentConfig","createAll","$elements","_options$scope","instance"],"mappings":"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"}