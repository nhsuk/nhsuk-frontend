{"version":3,"file":"tabs.mjs","sources":["../../../../src/nhsuk/components/tabs/tabs.mjs"],"sourcesContent":["/**\n * Tabs component\n */\nexport class Tabs {\n  /**\n   * @param {Element | null} [$root] - HTML element to use for component\n   */\n  constructor($root) {\n    if (!$root || !($root instanceof HTMLElement)) {\n      return this\n    }\n\n    this.$root = $root\n\n    const $tabs = this.$root.querySelectorAll('.nhsuk-tabs__tab')\n    const $tabList = this.$root.querySelector('.nhsuk-tabs__list')\n    const $tabListItems = this.$root.querySelectorAll('.nhsuk-tabs__list-item')\n\n    if (!$tabs.length || !$tabList || !$tabListItems.length) {\n      return this\n    }\n\n    this.$tabs = $tabs\n    this.$tabList = $tabList\n    this.$tabListItems = $tabListItems\n\n    // Save bound functions so we can remove event listeners during teardown\n    this.boundTabClick = this.onTabClick.bind(this)\n    this.boundTabKeydown = this.onTabKeydown.bind(this)\n    this.boundOnHashChange = this.onHashChange.bind(this)\n\n    this.keys = {\n      down: 40,\n      left: 37,\n      right: 39,\n      up: 38\n    }\n\n    this.jsHiddenClass = 'nhsuk-tabs__panel--hidden'\n\n    this.showEvent = new CustomEvent('tab.show')\n    this.hideEvent = new CustomEvent('tab.hide')\n\n    if (typeof window.matchMedia === 'function') {\n      this.setupResponsiveChecks()\n    } else {\n      this.setup()\n    }\n  }\n\n  setupResponsiveChecks() {\n    // $nhsuk-breakpoints: (\n    // mobile: 320px,\n    // tablet: 641px,\n    // desktop: 769px,\n    // large-desktop: 990px\n    // );\n    this.mql = window.matchMedia('(min-width: 641px)')\n\n    // MediaQueryList.addEventListener isn't supported by Safari < 14 so we need\n    // to be able to fall back to the deprecated MediaQueryList.addListener\n    if ('addEventListener' in this.mql) {\n      this.mql.addEventListener('change', this.checkMode.bind(this))\n    } else {\n      // addListener is a deprecated function, however addEventListener\n      // isn't supported by Safari < 14. We therefore add this in as\n      // a fallback for those browsers\n      this.mql.addListener(this.checkMode.bind(this))\n    }\n\n    this.checkMode()\n  }\n\n  checkMode() {\n    if (this.mql.matches) {\n      this.setup()\n    } else {\n      this.teardown()\n    }\n  }\n\n  setup() {\n    this.$tabList.setAttribute('role', 'tablist')\n\n    this.$tabListItems.forEach(($item) => {\n      $item.setAttribute('role', 'presentation')\n    })\n\n    this.$tabs.forEach(($tab) => {\n      // Set HTML attributes\n      this.setAttributes($tab)\n\n      // Handle events\n      $tab.addEventListener('click', this.boundTabClick, true)\n      $tab.addEventListener('keydown', this.boundTabKeydown, true)\n\n      // Remove old active panels\n      this.hideTab($tab)\n    })\n\n    // Show either the active tab according to the URL's hash or the first tab\n    const $activeTab = this.getTab(window.location.hash) || this.$tabs[0]\n    this.showTab($activeTab)\n\n    // Handle hashchange events\n    window.addEventListener('hashchange', this.boundOnHashChange, true)\n  }\n\n  teardown() {\n    this.$tabList.removeAttribute('role')\n\n    this.$tabListItems.forEach(($item) => {\n      $item.removeAttribute('role', 'presentation')\n    })\n\n    this.$tabs.forEach(($tab) => {\n      // Remove events\n      $tab.removeEventListener('click', this.boundTabClick, true)\n      $tab.removeEventListener('keydown', this.boundTabKeydown, true)\n\n      // Unset HTML attributes\n      this.unsetAttributes($tab)\n    })\n\n    // Remove hashchange event handler\n    window.removeEventListener('hashchange', this.boundOnHashChange, true)\n  }\n\n  onHashChange() {\n    const { hash } = window.location\n    const $tabWithHash = this.getTab(hash)\n    if (!$tabWithHash) {\n      return\n    }\n\n    // Prevent changing the hash\n    if (this.changingHash) {\n      this.changingHash = false\n      return\n    }\n\n    // Show either the active tab according to the URL's hash or the first tab\n    const $previousTab = this.getCurrentTab()\n\n    this.hideTab($previousTab)\n    this.showTab($tabWithHash)\n    $tabWithHash.focus()\n  }\n\n  hideTab($tab) {\n    this.unhighlightTab($tab)\n    this.hidePanel($tab)\n  }\n\n  showTab($tab) {\n    this.highlightTab($tab)\n    this.showPanel($tab)\n  }\n\n  getTab(hash) {\n    return this.$root.querySelector(`.nhsuk-tabs__tab[href=\"${hash}\"]`)\n  }\n\n  setAttributes($tab) {\n    // set tab attributes\n    const panelId = Tabs.getHref($tab).slice(1)\n    $tab.setAttribute('id', `tab_${panelId}`)\n    $tab.setAttribute('role', 'tab')\n    $tab.setAttribute('aria-controls', panelId)\n    $tab.setAttribute('aria-selected', 'false')\n    $tab.setAttribute('tabindex', '-1')\n\n    // set panel attributes\n    const $panel = this.getPanel($tab)\n    $panel.setAttribute('role', 'tabpanel')\n    $panel.setAttribute('aria-labelledby', $tab.id)\n    $panel.classList.add(this.jsHiddenClass)\n  }\n\n  unsetAttributes($tab) {\n    // unset tab attributes\n    $tab.removeAttribute('id')\n    $tab.removeAttribute('role')\n    $tab.removeAttribute('aria-controls')\n    $tab.removeAttribute('aria-selected')\n    $tab.removeAttribute('tabindex')\n\n    // unset panel attributes\n    const $panel = this.getPanel($tab)\n    $panel.removeAttribute('role')\n    $panel.removeAttribute('aria-labelledby')\n    $panel.removeAttribute('tabindex')\n    $panel.classList.remove(this.jsHiddenClass)\n  }\n\n  onTabClick(e) {\n    const $currentTab = this.getCurrentTab()\n    const $newTab = e.currentTarget\n\n    if (!$currentTab || !($newTab instanceof HTMLAnchorElement)) {\n      return\n    }\n\n    e.preventDefault()\n\n    this.hideTab($currentTab)\n    this.showTab($newTab)\n    this.createHistoryEntry($newTab)\n  }\n\n  createHistoryEntry($tab) {\n    const $panel = this.getPanel($tab)\n\n    // Save and restore the id\n    // so the page doesn't jump when a user clicks a tab (which changes the hash)\n    const { id } = $panel\n    $panel.id = ''\n    this.changingHash = true\n    window.location.hash = Tabs.getHref($tab).slice(1)\n    $panel.id = id\n  }\n\n  onTabKeydown(e) {\n    switch (e.keyCode) {\n      case this.keys.left:\n      case this.keys.up:\n        this.activatePreviousTab()\n        e.preventDefault()\n        break\n      case this.keys.right:\n      case this.keys.down:\n        this.activateNextTab()\n        e.preventDefault()\n        break\n\n      default:\n    }\n  }\n\n  activateNextTab() {\n    const currentTab = this.getCurrentTab()\n    const nextTabListItem = currentTab.parentNode.nextElementSibling\n    let nextTab\n\n    if (nextTabListItem) {\n      nextTab = nextTabListItem.querySelector('.nhsuk-tabs__tab')\n    }\n    if (nextTab) {\n      this.hideTab(currentTab)\n      this.showTab(nextTab)\n      nextTab.focus()\n      this.createHistoryEntry(nextTab)\n    }\n  }\n\n  activatePreviousTab() {\n    const currentTab = this.getCurrentTab()\n    const previousTabListItem = currentTab.parentNode.previousElementSibling\n    let previousTab\n\n    if (previousTabListItem) {\n      previousTab = previousTabListItem.querySelector('.nhsuk-tabs__tab')\n    }\n    if (previousTab) {\n      this.hideTab(currentTab)\n      this.showTab(previousTab)\n      previousTab.focus()\n      this.createHistoryEntry(previousTab)\n    }\n  }\n\n  getPanel($tab) {\n    const $panel = this.$root.querySelector(Tabs.getHref($tab))\n    return $panel\n  }\n\n  showPanel($tab) {\n    const $panel = this.getPanel($tab)\n    $panel.classList.remove(this.jsHiddenClass)\n    $panel.dispatchEvent(this.showEvent)\n  }\n\n  hidePanel(tab) {\n    const $panel = this.getPanel(tab)\n    $panel.classList.add(this.jsHiddenClass)\n    $panel.dispatchEvent(this.hideEvent)\n  }\n\n  unhighlightTab($tab) {\n    $tab.setAttribute('aria-selected', 'false')\n    $tab.parentNode.classList.remove('nhsuk-tabs__list-item--selected')\n    $tab.setAttribute('tabindex', '-1')\n  }\n\n  highlightTab($tab) {\n    $tab.setAttribute('aria-selected', 'true')\n    $tab.parentNode.classList.add('nhsuk-tabs__list-item--selected')\n    $tab.setAttribute('tabindex', '0')\n  }\n\n  getCurrentTab() {\n    return this.$root.querySelector(\n      '.nhsuk-tabs__list-item--selected .nhsuk-tabs__tab'\n    )\n  }\n\n  // this is because IE doesn't always return the actual value but a relative full path\n  // should be a utility function most prob\n  // http://labs.thesedays.com/blog/2010/01/08/getting-the-href-value-with-jquery-in-ie/\n  static getHref($tab) {\n    const href = $tab.getAttribute('href')\n    const hash = href.slice(href.indexOf('#'), href.length)\n    return hash\n  }\n}\n\n/**\n * Initialise tabs component\n *\n * @param {object} [options]\n * @param {Element | Document | null} [options.scope] - Scope of the document to search within\n */\nexport function initTabs(options = {}) {\n  const $scope = options.scope || document\n  const $tabs = $scope.querySelectorAll('[data-module=\"nhsuk-tabs\"]')\n\n  $tabs.forEach(($root) => {\n    new Tabs($root)\n  })\n}\n"],"names":["Tabs","constructor","$root","HTMLElement","$tabs","querySelectorAll","$tabList","querySelector","$tabListItems","length","boundTabClick","onTabClick","bind","boundTabKeydown","onTabKeydown","boundOnHashChange","onHashChange","keys","down","left","right","up","jsHiddenClass","showEvent","CustomEvent","hideEvent","window","matchMedia","setupResponsiveChecks","setup","mql","addEventListener","checkMode","addListener","matches","teardown","setAttribute","forEach","$item","$tab","setAttributes","hideTab","$activeTab","getTab","location","hash","showTab","removeAttribute","removeEventListener","unsetAttributes","$tabWithHash","changingHash","$previousTab","getCurrentTab","focus","unhighlightTab","hidePanel","highlightTab","showPanel","panelId","getHref","slice","$panel","getPanel","id","classList","add","remove","e","$currentTab","$newTab","currentTarget","HTMLAnchorElement","preventDefault","createHistoryEntry","keyCode","activatePreviousTab","activateNextTab","currentTab","nextTabListItem","parentNode","nextElementSibling","nextTab","previousTabListItem","previousElementSibling","previousTab","dispatchEvent","tab","href","getAttribute","indexOf","initTabs","options","$scope","scope","document"],"mappings":"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"}