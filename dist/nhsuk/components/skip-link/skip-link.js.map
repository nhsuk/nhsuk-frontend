{"version":3,"file":"skip-link.js","sources":["../../../../src/nhsuk/components/skip-link/skip-link.mjs"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-extraneous-class */\n\nimport { setFocus } from '../../common.mjs'\n\n/*\n * Skip link component\n *\n * When using VoiceOver on iOS, focus remains on the skip link anchor\n * when elected so the next focusable element is not at the jumped to area.\n */\nexport class SkipLink {\n  /**\n   * @param {Element | null} [$root] - HTML element to use for component\n   */\n  constructor($root) {\n    if (!$root || !($root instanceof HTMLAnchorElement)) {\n      return this\n    }\n\n    this.$root = $root\n\n    const linkedElementId = this.$root.hash.split('#').pop()\n    const $linkedElement = linkedElementId\n      ? document.getElementById(linkedElementId)\n      : null\n\n    // Check for linked element\n    if (!$linkedElement) {\n      return this\n    }\n\n    /**\n     * Focus the linked element on click\n     *\n     * Adds a helper CSS class to hide native focus styles,\n     * but removes it on blur to restore native focus styles\n     */\n    this.$root.addEventListener('click', () =>\n      setFocus($linkedElement, {\n        onBeforeFocus() {\n          $linkedElement.classList.add('nhsuk-skip-link-focused-element')\n        },\n        onBlur() {\n          $linkedElement.classList.remove('nhsuk-skip-link-focused-element')\n        }\n      })\n    )\n  }\n}\n\n/**\n * Initialise skip link component\n *\n * @param {object} [options]\n * @param {Element | Document | null} [options.scope] - Scope of the document to search within\n */\nexport function initSkipLinks(options = {}) {\n  const $scope = options.scope || document\n  const $skipLinks = $scope.querySelectorAll('.nhsuk-skip-link')\n\n  $skipLinks.forEach(($root) => {\n    new SkipLink($root)\n  })\n}\n"],"names":["SkipLink","constructor","$root","HTMLAnchorElement","linkedElementId","hash","split","pop","$linkedElement","document","getElementById","addEventListener","setFocus","onBeforeFocus","classList","add","onBlur","remove","initSkipLinks","options","$scope","scope","$skipLinks","querySelectorAll","forEach"],"mappings":";;;;AAAA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMA,QAAQ,CAAC;AACpB;AACF;AACA;EACEC,WAAWA,CAACC,KAAK,EAAE;IACjB,IAAI,CAACA,KAAK,IAAI,EAAEA,KAAK,YAAYC,iBAAiB,CAAC,EAAE;AACnD,MAAA,OAAO,IAAI;AACb;IAEA,IAAI,CAACD,KAAK,GAAGA,KAAK;AAElB,IAAA,MAAME,eAAe,GAAG,IAAI,CAACF,KAAK,CAACG,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAE;IACxD,MAAMC,cAAc,GAAGJ,eAAe,GAClCK,QAAQ,CAACC,cAAc,CAACN,eAAe,CAAC,GACxC,IAAI;;AAER;IACA,IAAI,CAACI,cAAc,EAAE;AACnB,MAAA,OAAO,IAAI;AACb;;AAEA;AACJ;AACA;AACA;AACA;AACA;IACI,IAAI,CAACN,KAAK,CAACS,gBAAgB,CAAC,OAAO,EAAE,MACnCC,eAAQ,CAACJ,cAAc,EAAE;AACvBK,MAAAA,aAAaA,GAAG;AACdL,QAAAA,cAAc,CAACM,SAAS,CAACC,GAAG,CAAC,iCAAiC,CAAC;OAChE;AACDC,MAAAA,MAAMA,GAAG;AACPR,QAAAA,cAAc,CAACM,SAAS,CAACG,MAAM,CAAC,iCAAiC,CAAC;AACpE;AACF,KAAC,CACH,CAAC;AACH;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,CAACC,OAAO,GAAG,EAAE,EAAE;AAC1C,EAAA,MAAMC,MAAM,GAAGD,OAAO,CAACE,KAAK,IAAIZ,QAAQ;AACxC,EAAA,MAAMa,UAAU,GAAGF,MAAM,CAACG,gBAAgB,CAAC,kBAAkB,CAAC;AAE9DD,EAAAA,UAAU,CAACE,OAAO,CAAEtB,KAAK,IAAK;IAC5B,IAAIF,QAAQ,CAACE,KAAK,CAAC;AACrB,GAAC,CAAC;AACJ;;;;;"}