{"version":3,"file":"character-count.js","sources":["../../../../src/nhsuk/components/character-count/character-count.mjs"],"sourcesContent":null,"names":["CharacterCount","ConfigurableComponent","constructor","$root","config","_ref","lastInputTimestamp","lastInputValue","valueChecker","$textarea","querySelector","HTMLTextAreaElement","HTMLInputElement","ElementError","component","element","expectedType","identifier","errors","validateConfig","schema","ConfigError","formatErrorMessage","i18n","maxwords","maxlength","screenReaderCountMessageClass","textareaDescriptionClass","visibleCountMessageClass","I18n","locale","closestAttributeValue","maxLength","Infinity","textareaDescriptionId","id","$textareaDescription","document","getElementById","$errorMessage","exec","textContent","t","count","insertAdjacentElement","$screenReaderCountMessage","createElement","setAttribute","classList","add","$visibleCountMessage","className","remove","removeAttribute","bindChangeEvents","window","addEventListener","updateCountMessage","configOverride","datasetConfig","configOverrides","undefined","text","_text$match","tokens","match","length","handleKeyUp","handleFocus","handleBlur","checkIfValueChanged","value","updateVisibleCountMessage","updateScreenReaderCountMessage","remainingNumber","isError","isOverThreshold","toggle","formattedUpdateMessage","countType","formatCountMessage","translationKeySuffix","Math","abs","threshold","currentLength","thresholdValue","Date","now","setInterval","clearInterval","moduleName","defaults","Object","freeze","charactersUnderLimit","one","other","charactersAtLimit","charactersOverLimit","wordsUnderLimit","wordsAtLimit","wordsOverLimit","textareaDescription","properties","type","anyOf","required","errorMessage","initCharacterCounts","options","scope","$scope","normaliseOptions","$characterCounts","querySelectorAll","forEach"],"mappings":"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"}