{"version":3,"file":"character-count.mjs","sources":["../../../../src/nhsuk/components/character-count/character-count.mjs"],"sourcesContent":null,"names":["CharacterCount","ConfigurableComponent","constructor","$root","config","_ref","_this$config$maxwords","lastInputTimestamp","lastInputValue","valueChecker","$textarea","querySelector","HTMLTextAreaElement","HTMLInputElement","ElementError","component","element","expectedType","identifier","errors","validateConfig","schema","ConfigError","formatErrorMessage","maxLength","maxwords","maxlength","Infinity","textareaDescriptionId","id","$textareaDescription","document","getElementById","$errorMessage","insertAdjacentElement","$screenReaderCountMessage","createElement","className","setAttribute","$visibleCountMessage","classList","add","removeAttribute","bindChangeEvents","window","addEventListener","updateCountMessage","count","text","_text$match","tokens","match","length","handleKeyUp","handleFocus","handleBlur","checkIfValueChanged","value","updateVisibleCountMessage","updateScreenReaderCountMessage","remainingNumber","isError","toggle","isOverThreshold","textContent","formattedUpdateMessage","charVerb","charNoun","displayNumber","Math","abs","threshold","currentLength","thresholdValue","Date","now","setInterval","clearInterval","moduleName","defaults","Object","freeze","properties","type","anyOf","required","errorMessage","initCharacterCounts","options","scope","$scope","normaliseOptions","$characterCounts","querySelectorAll","forEach"],"mappings":"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"}