{% from "nhsuk/macros/attributes.njk" import nhsukAttributes %}

{%- set copyrightText = params.copyright if params.copyright else "Â© NHS England" -%}

{% macro _footerListItem(item, defaultItem = false) %}
<li class="nhsuk-footer__list-item{% if defaultItem %} nhsuk-footer-default__list-item{% endif %}">
  <a class="nhsuk-footer__list-item-link" href="{{ item.href }}">{{ item.text }}</a>
</li>
{% endmacro %}

<footer role="contentinfo">
  <div class="nhsuk-footer-container">
    <div class="nhsuk-width-container {%- if params.containerClasses %} {{ params.containerClasses }}{% endif %}">
      <h2 class="nhsuk-u-visually-hidden">Support links</h2>
      <div class="nhsuk-footer {%- if params.classes %} {{ params.classes }}{% endif %}"
        {{- nhsukAttributes(params.attributes) }}>
{%- if not params.linksColumn2 %}
        <ul class="nhsuk-footer__list">
        {% for item in params.links %}
          {{ _footerListItem(item, true) }}
        {% endfor %}
        {% for item in params.linksColumn2 %}
          {{ _footerListItem(item, true) }}
        {% endfor %}
        {% for item in params.linksColumn3 %}
          {{ _footerListItem(item, true) }}
        {% endfor %}
        {% for item in params.metaLinks %}
          {{ _footerListItem(item, true) }}
        {% endfor %}
        </ul>
        <div>
          <p class="nhsuk-footer__copyright">{{ copyrightText }}</p>
        </div>
      </div>
{% else %}
        <ul class="nhsuk-footer__list">
        {% for item in params.links %}
          {{ _footerListItem(item) }}
        {% endfor %}
        </ul>
        <ul class="nhsuk-footer__list">
        {% for item in params.linksColumn2 %}
          {{ _footerListItem(item) }}
        {% endfor %}
        </ul>
        <ul class="nhsuk-footer__list">
        {% for item in params.linksColumn3 %}
          {{ _footerListItem(item) }}
        {% endfor %}
        </ul>
        {% if params.metaLinks %}
        <ul class="nhsuk-footer__list nhsuk-footer__meta">
        {% for item in params.metaLinks %}
          {{ _footerListItem(item) }}
        {% endfor %}
        </ul>
        {% endif %}
      </div>
      <div>
        <p class="nhsuk-footer__copyright">{{ copyrightText }}</p>
      </div>
{% endif %}
    </div>
  </div>
</footer>
