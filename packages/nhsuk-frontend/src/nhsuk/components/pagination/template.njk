{% from "nhsuk/macros/attributes.njk" import nhsukAttributes %}
{% from "nhsuk/macros/icon.njk" import nhsukIcon %}

{# Numbered page - included as a link within a list item. #}
{%- macro _pageItem(item) -%}
  <li class="nhsuk-pagination__item {%- if item.current %} nhsuk-pagination__item--current{% endif %} {%- if item.ellipsis %} nhsuk-pagination__item--ellipsis{% endif %} {%- if item.classes %} {{ item.classes }}{% endif %}">
  {% if item.ellipsis %}
    &ctdot;
  {% else %}
    <a class="nhsuk-pagination__link" href="{{ item.href }}" aria-label="{{ item.visuallyHiddenText | default("Page " ~ item.number) }}"
      {%- if item.current %} aria-current="page"{% endif %}
      {{- nhsukAttributes(item.attributes) }}>
      {{ item.number }}
    </a>
  {% endif %}
  </li>
{%- endmacro -%}

<nav {%- if params.id %} id="{{ params.id }}"{% endif %} class="nhsuk-pagination
  {%- if params.items | length %} nhsuk-pagination--numbered{% endif %}
  {%- if params.classes %} {{ params.classes }}{% endif %}" role="navigation" aria-label="{{ params.landmarkLabel | default("Pagination", true) }}"
  {{- nhsukAttributes(params.attributes) }}>

{% if params.previous.href and params.items | length %}
  <a href="{{ params.previous.href }}" class="nhsuk-pagination__previous" rel="prev">
    {{ nhsukIcon("arrow-left") | trim | indent(4) }}
    <span class="nhsuk-pagination__title">
    {% if params.previous.html or params.previous.text %}
      {{ params.previous.html | safe | trim | indent(6) if params.previous.html else params.previous.text }}
    {% else %}
      Previous<span class="nhsuk-u-visually-hidden"> page</span>
    {% endif %}
    </span>
  </a>
{% endif %}

{%- if params.items | length %}
  <ul class="nhsuk-pagination__list">
  {% for item in params.items %}
    {{ _pageItem(item) | indent(2) if item }}
  {% endfor %}
  </ul>
{% endif %}

{%- if params.next.href and params.items | length %}
  <a href="{{ params.next.href }}" class="nhsuk-pagination__next" rel="next">
    <span class="nhsuk-pagination__title">
    {% if params.next.html or params.next.text %}
      {{ params.next.html | safe | trim | indent(6) if params.next.html else params.next.text }}
    {% else %}
      Next<span class="nhsuk-u-visually-hidden"> page</span>
    {% endif %}
    </span>
    {{ nhsukIcon("arrow-right") | trim | indent(4) }}
  </a>
{% endif %}

{% if not params.items | length %}
  <ul class="nhsuk-list nhsuk-pagination__list">
  {% if params.previous.href %}
    <li class="nhsuk-pagination-item--previous">
      <a class="nhsuk-pagination__link nhsuk-pagination__link--prev" href="{{ params.previous.href }}" rel="prev"
        {{- nhsukAttributes(params.previous.attributes) }}>
        <span class="nhsuk-pagination__title">
        {% if params.previous.html or params.previous.text %}
          {{ params.previous.html | safe | trim | indent(8) if params.previous.html else params.previous.text }}
        {% else %}
          Previous<span class="nhsuk-u-visually-hidden"> page</span>
        {% endif %}
        </span>
        {% if params.previous.labelText %}
        <span class="nhsuk-u-visually-hidden">:</span>
        <span class="nhsuk-pagination__page">{{ params.previous.labelText }}</span>
        {% endif %}
        {{ nhsukIcon("arrow-left") | trim | indent(8) }}
      </a>
    </li>
  {% endif %}

  {% if params.next.href %}
    <li class="nhsuk-pagination-item--next">
      <a class="nhsuk-pagination__link nhsuk-pagination__link--next" href="{{ params.next.href }}" rel="next"
        {{- nhsukAttributes(params.next.attributes) }}>
        <span class="nhsuk-pagination__title">
        {% if params.next.html or params.next.text %}
          {{ params.next.html | safe | trim | indent(8) if params.next.html else params.next.text }}
        {% else %}
          Next<span class="nhsuk-u-visually-hidden"> page</span>
        {% endif %}
        </span>
        {% if params.next.labelText %}
        <span class="nhsuk-u-visually-hidden">:</span>
        <span class="nhsuk-pagination__page">{{ params.next.labelText }}</span>
        {% endif %}
        {{ nhsukIcon("arrow-right") | trim | indent(8) }}
      </a>
    </li>
  {% endif %}
  </ul>
{% endif %}
</nav>
